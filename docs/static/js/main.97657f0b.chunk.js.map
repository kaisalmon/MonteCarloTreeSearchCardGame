{"version":3,"sources":["webpack:///./src/client/worker/worker.ts?3305","mcts/mcts.ts","cardgame/Components/TextTemplate.ts","cardgame/Card.ts","cardgame/Components/Effects/RandomTransferEffect.ts","cardgame/Components/Effects/ListEffect.ts","cardgame/Components/Effects/ChangePlayerValue.ts","cardgame/Components/Effects/ConditionalEffect.ts","cardgame/Components/GameConditions/PlayerLessThanCondition.ts","cardgame/Components/Abilities/OnEventAbility.ts","cardgame/Components/ChoiceActions/ChooseAPlayer.ts","cardgame/Components/Effects/MovePlayerEffect.ts","cardgame/Components/ChoiceActions/ContextualExtreme.ts","cardgame/Components/Effects/MoveDemographicEffect.ts","cardgame/Components/ChoiceActions/ChooseAnExtreme.ts","cardgame/Components/ChoiceActions/ChooseOne.ts","cardgame/Components/GameConditions/PlayerPositionCondition.ts","cardgame/Components/setup.ts","cardgame/CreateStartingDemographics.ts","cardgame/CardGame.ts","client/ChoiceArrow.tsx","client/DelayHover.tsx","client/CardComponent.tsx","client/CardWrapper.tsx","client/assets/bg.png","client/TransitionProps.tsx","client/DemographicDisplay.tsx","client/CardPile.tsx","client/PlayerHand.tsx","client/GameBoard.tsx","client/worker/index.ts","cardgame/Data/ExampleDecks.ts","client/pages/main.tsx","App.tsx","reportWebVitals.ts","index.tsx","client/worker/worker.ts","client/assets/icons sync nonrecursive /.(png)$","client/assets/icons/card-draw.png","client/assets/icons/card-exchange.png","client/assets/icons/card-pickup.png","client/assets/icons/card-random.png","client/assets/icons/contract.png","client/assets/icons/expand.png","client/assets/icons/move.png","client/assets/icons/overhead.png","client/assets/icons/quill-ink.png","client/assets/icons/star.png"],"names":["module","exports","Worker","promptSync","GameStatus","ResolveConstant","constructor","value","ctxKey","super","this","resolveValue","state","ctx","game","r","Effect","applyEffectNoFizzle","executionContext","applyEffect","e","Fizzle","isFizzle","returnState","TextTemplate","slot","template","factory","regex","slots","pattern","toLowerCase","replace","RegExp","matchAll","map","match","templates","push","_text","text","trim","candidates","filter","length","Error","errors","results","matches","subTexts","splice","args","i","parse","x","errorMessages","_","uniq","message","join","result","Eff","ChoiceAction","Player","N","Cond","Ability","Demos","Position","Card","cardNumber","cost","preEffect","playerKey","player","hand","capitalCost","Math","min","capital","popCost","indexOf","endRoundAfterThisTurn","popularity","postEffect","cardPlayedThisTurn","discardPile","play","activePlayer","afterPreEffect","afterEffect","EffectCard","getName","name","getText","getIcon","effect","ChoiceActionCard","choiceAction","step","cardBeingPlayed","c","hasOwnProperty","ItemCard","ability","board","RandomTransferEffect","target","from","to","n","s","transfer","targetKey","fromPile","toPile","drawIndex","floor","random","DrawCardEffect","processEvent","cardNumbers","xor","ListEffect","a","b","afterA","ChangePlayerValue","amount","field","icon","modifier","ConditionalEffect","eff","condition","PlayerLessThanCondition","mapping","OnEventAbility","eventType","abilityType","trigger","eventParams","triggerCtx","lastPlayer","FilteredOnEventAbility","ChooseAPlayer","move","choice","getChoices","type","MovePlayerEffect","position","shift","MovePlayerTowardsPointEffect","point","stepSize","pos","deltaX","deltaY","y","deltaMag","sqrt","clampedStepSize","clamp","max","shiftTowardsPoint","MoveDemographicEffect","getIconModiferFromPoint","ContextualExtreme","lastExtreme","EXTREMES","hearts","clubs","diamonds","spades","demos","indexes","demographics","demo","includes","pointResolver","is","undefined","MoveDemographicTowardsPointEffect","resolveAllDemographics","resolveFollowers","playerTarget","getDemographicVote","resolveUndecided","ListDemographic","aDemos","bDemos","resolveQuadrantDemographics","inQuad","sign","inSource","intersectionWith","ResolvePlayerPosition","EXTREMES_BY_ID","1","2","3","4","ID_BY_EXTREME","ChooseAnExtreme","ChooseOne","aText","bText","PlayerInQuadrantCondition","extreme","quad","hasTarget","resolveActivePlayer","resolveOpponent","resolvePlayerContextually","setupEffects","numberToWords","toWords","reversedConditionalFactory","cond","setupConditional","forEach","Object","entries","createStartingDemographics","eighth","Array","fill","points","thresholdSquared","pointGroups","putInGroup","group","other","dx","dy","reduce","mergeByDistance","quadrant","flatMap","coord","reflectAcrossBothAxes","POP_RANGE","PASS_TURN_DRAW_EFFECT","CardGame","applyMoveChain","chain","isArray","applyMove","cardIndex","deckOne","deckTwo","keys","parseFloat","onTurnEnd","applyCardPlay","applyCardDiscard","applyChoiceMove","getSensibleMoves","roundsUntilElection","votes","getVotes","getCardMoves","bPop","playerOne","rPop","playerTwo","bdistSquared","pow","rdistSquared","rScore","bScore","identity","countBy","getStatus","IN_PLAY","WIN","LOSE","DRAW","getValidMoves","card","getDiscardMoves","newGame","newPlayer","preGame","isFirstTurn","deck","blueDrawCardsEffect","STARTING_HAND_SIZE","redDrawCardsEffect","p1Draw","print","console","log","chalk","white","JSON","stringify","blue","red","randomizeHiddenInfo","opponentKey","playMove","roundEnding","afterRoundUpdateState","onRoundEnd","afterTurnEndState","getHeuristic","bluePoints","redPoints","baseState","isItemCard","isOnEventAbility","listener","afterEvents","updatePlayer","newState","drawEffect","getActiveActionChoice","ARROW_STYLE","boxSizing","background","width","zIndex","left","top","marginBottom","transformOrigin","display","flexDirection","alignItems","cursor","pointerEvents","HEAD_STYLE","borderLeft","borderRight","borderTop","ChoiceArrow","height","setHeight","React","useState","theta","setTheta","element","useRef","dynamicStyle","transform","useEffect","event","current","domRect","getBoundingClientRect","clientX","clientY","atan2","window","addEventListener","removeEventListener","ref","style","DelayHover","props","tId","setTId","hovered","setHovered","handleHoverCancel","className","onMouseOver","setTimeout","handleHoverTrigger","delay","onMouseOut","clearTimeout","children","icons","moduleArr","key","default","keyBy","mapValues","importAll","require","CARD_STYLE","backfaceVisibility","border","borderRadius","fontFamily","fontSize","padding","transition","overflow","color","OUTLINE_WRAPPER_STYLE","flexGrow","BACKGROUND_ICONS_STYLE","backgroundSize","backgroundRepeat","opacity","BACKFACE_STYLE","backgroundColor","CARD_TITLE_STYLE","fontWeight","lineHeight","textAlign","justifyContent","CARD_COST_STYLE","CARD_TEXT_STYLE","VERTICAL_CENTER_STYLE","HIDDEN_STYLE","VerticalCenter","IconComponent","hsv","iconName","src","TextFillSpace","setFontSize","size","clientHeight","scrollHeight","clientWidth","scrollWidth","CardComponent","rotationStyle","isHidden","useMemo","backgroundImage","onClick","BEING_PLAYED_CARD_STYLE","borderColor","margin","CAN_BE_DISCADED_STYLE","borderWidth","CAN_BE_PLAYED_STYLE","MOVE_DOWN_STYLE","MOVE_UP_STYLE","VANISHED_STYLE","CHOICE_BUBBLE_STYLE","WRAPPER_STYLE","CardWrapper","hasAppearedOnBoard","setHasAppearedOnBoard","onBoard","beingPlayed","situationalStyle","canBeDiscarded","canBePlayed","positionStyling","isOpponent","activeChoice","gamestate","chooseOneActive","choiceTexts","setPreview","TransitionProps","component","propList","rest","visibleProps","setVisibleProps","newVisibleProps","requiresUpdate","currentValue","diff","abs","newValue","COMPASS_STYLE","PLAYER_STYLE","DEMOGRAPHIC_STYLE","VOTES_BAR_STYLE","coordsToTransform","shaders","Shaders","create","helloBlue","frag","GLSL","Background","blueX","redPop","redX","bluePop","blueY","redY","pblueX","predPop","predX","pbluePop","pblueY","predY","coef","bg","mixBlendMode","shader","uniforms","AnimatedBackground","Component","render","VoteBars","redVotes","blueVotes","round","DemographicDisplay","previewState","onChoiceClick","previewVotes","isChoosingPlayer","isChoosingExtreme","bluePlayer","redPlayer","vote","preview","ghostStyling","PILE_STYLE","CARD_LIST_STYLE","maxHeight","overflowY","CardPile","label","cards","getArrowProps","getTooltipProps","setTooltipRef","setTriggerRef","visible","usePopperTooltip","interactive","delayHide","HAND_STYLE","PlayerHand","displayHand","onCardClick","isActive","cardsBeingPlayed","placeContent","ACTIVE_WRAPPER_STYLE","HEALTH_WRAPPER_STYLE","HEALTH_STYLE","bottom","PlayerDisplay","lastmove","sort","GameBoard","parseCard","raw","getExampleDeck","values","some","arr","rawCards","ExampleDeckCsv","worker","Main","combinedGameState","setCombinedGameState","status","mood","setMood","setPreviewState","isLoading","setIsLoading","nextTimeout","async","delay_time","lastMove","Promise","all","processData","canEndTurn","find","m","disabled","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","document","getElementById","inst","wrap","f","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","code","resolve"],"mappings":"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","file":"static/js/main.97657f0b.chunk.js","sourcesContent":["module.exports = function() {\n  return new Worker(__webpack_public_path__ + \"d7dbf09d7326305fe81d.worker.js\");\n};","import _ from 'lodash';\r\nimport promptSync from 'prompt-sync'\r\nimport objectHash from 'object-hash'\r\nconst prompt = promptSync();\r\n\r\nexport enum GameStatus{\r\n    IN_PLAY='IN_PLAY',\r\n    LOSE='RED_WIN',\r\n    WIN='BLUE_WIN',\r\n    DRAW='DRAW'\r\n}\r\n\r\nconst getPlayerGoal = (player:1|2) => player === 1 ? GameStatus.WIN : GameStatus.LOSE;\r\n\r\ninterface GameState{\r\n    activePlayer: 1|2,\r\n}\r\n\r\nexport abstract class Game<STATE extends GameState, T>{\r\n    abstract newGame():STATE;\r\n    abstract getValidMoves(state:STATE):(T|T[])[];\r\n    abstract print(state:STATE):void;\r\n     abstract randomizeHiddenInfo(state:STATE):STATE;\r\n     abstract applyMove(state:STATE, move:T):STATE;\r\n    abstract getStatus(state:STATE):GameStatus;\r\n\r\n    applyMoveChain(state: STATE, chain: T[]|T): STATE{\r\n        if(!Array.isArray(chain)) return this.applyMove(state, chain)\r\n        return  chain.reduce((s,move)=>this.applyMove(s, move), state);\r\n    }\r\n}\r\n\r\nexport interface Strategy<STATE extends GameState, T>{\r\n    mood: string;\r\n    pickMove(game:Game<STATE,T>, state:STATE):T|T[];\r\n}\r\n\r\nexport type StateFromGame<G> = G extends Game<infer U,any> ?  U : never;\r\nexport type MoveFromGame<G> = G extends Game<any, infer U> ?  U : never;\r\n\r\nexport function wilsonScore(successes:number, trails:number, z=1.96){\r\n    const failures = trails - successes;\r\n    const base = (successes + 0.5 * z * z)/(trails + z*z);\r\n    const plusMinus = z / (trails+z*z) * Math.sqrt(successes*failures/trails + z*z/4)\r\n    return {lowerBound:base-plusMinus, upperBound:base+plusMinus}\r\n}\r\n\r\nexport class RandomStrategy<STATE extends GameState, T> implements Strategy<STATE, T>{\r\n    mood = \"none\";\r\n    trueRandom: boolean;\r\n\r\n    constructor(trueRandom:boolean = false) {\r\n        this.trueRandom = trueRandom;\r\n    }\r\n\r\n    pickMove(game:Game<STATE, T>, state: STATE): T|T[] {\r\n        const validMove = _.sample(game.getValidMoves(state))\r\n        if (validMove) {\r\n            return validMove;\r\n        }\r\n        throw new Error('No valid moves')\r\n    }\r\n}\r\n\r\nexport class InputStrategy<STATE extends GameState, T> implements Strategy<STATE, T> {\r\n    mood=\"player\"\r\n    transform:(str:string)=>T;\r\n    constructor(transform:(str:string)=>T) {\r\n        this.transform = transform;\r\n    }\r\n\r\n    pickMove(game: Game<STATE, T>, state: STATE): T {\r\n        game.print(state);\r\n        return this.transform(prompt(\"What's your move?\"))\r\n    }\r\n\r\n}\r\n\r\n\r\nexport class MCTSStrategy<STATE extends GameState, T>implements Strategy<STATE, T>{\r\n    mood = \"waiting...\"\r\n    private simulationStrategy: Strategy<STATE, T>;\r\n    private samples:number;\r\n    private depth:number;\r\n    private inPlayHeuristic:(state:STATE)=>number;\r\n\r\n    usePruning:boolean=false;\r\n    z: number = 1.96;\r\n    pruningPeriod: number = 50;\r\n    useCache:boolean=false;\r\n\r\n    secondaryObjective?:(state:STATE)=>number;\r\n\r\n    private cache:Record<string,T|T[]> = {};\r\n\r\n    constructor(samples=60, depth=100, inPlayHeuristic: (state:STATE)=>number = ()=>0, simulationStrategy:Strategy<STATE, T> = new RandomStrategy()) {\r\n        this.simulationStrategy = simulationStrategy;\r\n        this.depth = depth;\r\n        this.samples = samples;\r\n        this.inPlayHeuristic = inPlayHeuristic;\r\n    }\r\n\r\n    pickMove(game:Game<STATE, T>, state: STATE): T|T[] {\r\n        if(!this.useCache)return this.performPickMove(game, state);\r\n        const hash = objectHash(state);\r\n        if(!this.cache[hash]){\r\n            this.cache[hash] = this.performPickMove(game, state);\r\n        }\r\n        return this.cache[hash];\r\n    }\r\n    performPickMove(game:Game<STATE, T>, state: STATE): T|T[] {\r\n        let evaluations = game.getValidMoves(state).map(move=>({move, score:0, outOf:0, depth: 0,unfinished:0, wins:0, secondaryObjective:0}));\r\n        if(evaluations.length === 0) throw new Error('No valid moves')\r\n        const playerGoal = getPlayerGoal(state.activePlayer);\r\n        const iterations = Math.ceil(this.samples/evaluations.length);\r\n        for(let i = 0; i < iterations; i++){\r\n            evaluations.forEach(evaluation=>{\r\n                const desire = state.activePlayer === 1 ? 1 : -1;\r\n                const stateWithScrambledUnknowns = game.randomizeHiddenInfo(state);\r\n                const moves = Array.isArray(evaluation.move) ? evaluation.move : [evaluation.move]\r\n                const newState = game.applyMoveChain(stateWithScrambledUnknowns, moves)\r\n                const simulation = this.simulateGame(game, newState) ;\r\n                evaluation.outOf++;\r\n                evaluation.secondaryObjective += simulation.secondaryObjective * desire;\r\n                if(simulation.status === playerGoal){\r\n                    evaluation.score++;\r\n                    evaluation.wins++;\r\n                }else if(simulation.status !== GameStatus.DRAW && simulation.status !== GameStatus.IN_PLAY){\r\n                    evaluation.score--;\r\n                }else if(simulation.heuristic !== undefined){\r\n                    evaluation.score += simulation.heuristic * desire ;\r\n                    evaluation.wins += (evaluation.score+1)/2;\r\n                    evaluation.unfinished++;\r\n                }else if(simulation.status === GameStatus.DRAW){\r\n                    evaluation.wins += 0.5;\r\n                }\r\n                evaluation.depth += simulation.length;\r\n            })\r\n            if(this.usePruning && (i % this.pruningPeriod) === (this.pruningPeriod - 1)){\r\n                 const highestEval =  _.maxBy(evaluations, 'score')!;\r\n                 const bestWilsonScore = wilsonScore(highestEval.wins, highestEval.outOf, this.z)\r\n                 evaluations = evaluations.filter(evaluation=> {\r\n                     if(evaluation === highestEval) return true;\r\n                     const evaluationWilsonScore = wilsonScore(evaluation.wins, evaluation.outOf, this.z)\r\n                     const confidentIsSuboptimal =  bestWilsonScore.lowerBound > evaluationWilsonScore.upperBound;\r\n                     return !confidentIsSuboptimal\r\n                 });\r\n            }\r\n            if(evaluations.length === 1){\r\n                break;\r\n            }\r\n        }\r\n        const highestEval =  _.maxBy(evaluations, 'score')!;\r\n        const highestScore = highestEval.score / highestEval.outOf\r\n        const bestMoves = evaluations.filter(({score,outOf})=>(score/outOf) > highestScore - 0.01)\r\n\r\n        if(highestScore > 0.95) {\r\n            const result = this.secondaryObjective ? _.maxBy(bestMoves, 'secondaryObjective')!  : _.minBy(bestMoves, 'depth')!\r\n            this.mood = JSON.stringify({\r\n                score: (result.score/result.outOf).toFixed(2),\r\n                goal: this.secondaryObjective ? 'Maximizing Secondary Objective' : 'Minimizing Length to Victory',\r\n                depth: (result.depth / result.outOf).toFixed(2),\r\n                unfinished: (result.unfinished / result.outOf).toFixed(2)\r\n            })\r\n            return result.move;\r\n        }else if(highestScore < -0.95){\r\n            const result = this.secondaryObjective ? _.maxBy(bestMoves, 'secondaryObjective')!  :  _.maxBy(bestMoves, 'depth')!\r\n            this.mood = JSON.stringify({\r\n                score: (result.score/result.outOf).toFixed(2),\r\n                goal: this.secondaryObjective ? 'Maximizing Secondary Objective' : 'Delaying time till loss',\r\n                depth: (result.depth / result.outOf).toFixed(2),\r\n                unfinished: (result.unfinished / result.outOf).toFixed(2)\r\n            })\r\n            return result.move;\r\n        }else{\r\n            const result =  _.maxBy(bestMoves, 'score')!\r\n            this.mood = JSON.stringify({\r\n                score: (result.score / result.outOf).toFixed(3),\r\n                depth: (result.depth / result.outOf).toFixed(2),\r\n                unfinished: (result.unfinished / result.outOf).toFixed(2)\r\n            })\r\n            return  result.move;\r\n        }\r\n    }\r\n    simulateGame(game:Game<STATE, T>, state:STATE):{status:GameStatus, length:number, heuristic?:number, secondaryObjective:number}{\r\n        let curState = state;\r\n        for(let i = 0; i < this.depth; i++){\r\n            const status = game.getStatus(curState);\r\n            const secondaryObjective = this.secondaryObjective ? this.secondaryObjective(curState) : 0;\r\n            if(status !== GameStatus.IN_PLAY) return {status, length: i, secondaryObjective};\r\n            try{\r\n                const move = this.simulationStrategy.pickMove(game, curState);\r\n                if(!move) return {status: GameStatus.DRAW, length: i, secondaryObjective};\r\n                curState = game.applyMoveChain(curState, move)\r\n            }catch(e){\r\n                if(e.message.includes('No valid move')) return {status: GameStatus.DRAW, length: i, secondaryObjective};\r\n                throw e;\r\n            }\r\n        }\r\n        const secondaryObjective = this.secondaryObjective ? this.secondaryObjective(curState) : 0;\r\n        return {status: GameStatus.IN_PLAY, length: this.depth, heuristic: this.inPlayHeuristic(curState), secondaryObjective};\r\n    }\r\n}\r\n\r\n","import CardGame, {CardGameChoiceMove, CardGameMove, CardGameState} from \"../CardGame\";\r\nimport {Card, Icon, PlayerKey} from \"../Card\";\r\nimport _ from 'lodash'\r\nimport {EventParams, EventType} from \"./Abilities/OnEventAbility\";\r\n\r\ntype KeysMatching<T, V> = {[K in keyof T]?: T[K] extends V ? K : never}[keyof T] | {[K in keyof T]?: T[K] extends (V|undefined) ? K : never}[keyof T] ;\r\ntype Component = ResolveSlot<any>|string[]\r\ntype GetSlot<T extends Component> = T extends ResolveSlot<infer R> ? R : any;\r\ntype Slot = 'Eff'|'Player'|'N'|'Cond'|'Ability'|'ChoiceAction'|'Demos'|'Position'\r\ntype ResolveSlot<SLOT extends Slot> = SLOT extends 'Eff' ? Effect\r\n                                    : SLOT extends 'Ability' ? Ability\r\n                                    : SLOT extends 'Player' ? PlayerTarget\r\n                                    : SLOT extends 'ChoiceAction' ? ChoiceAction\r\n                                    : SLOT extends 'Cond' ? Resolver<boolean>\r\n                                    : SLOT extends 'Demos' ? Resolver<number[]>\r\n                                    : SLOT extends 'Position' ? Resolver<{x:number, y:number}>\r\n                                    : SLOT extends 'N' ? number\r\n                                    : never;\r\n\r\n\r\nexport type ExecutionContext = {\r\n  playerKey: PlayerKey\r\n  lastPlayer?: PlayerKey;\r\n  lastExtreme?: Coord;\r\n} & (EventContext<EventType> | {})\r\n\r\nexport type Coord = {x:number, y:number};\r\n\r\ntype EventContext<E extends EventType> = {\r\n    eventType: E,\r\n    eventParams:EventParams<E>\r\n}\r\n\r\nexport abstract class Resolver<T>{\r\n   abstract resolveValue(state:CardGameState, ctx:ExecutionContext, game:CardGame):T;\r\n}\r\n\r\nexport class ResolveConstant<T> extends Resolver<T>{\r\n  value:T;\r\n  ctxKey?: KeysMatching<ExecutionContext, T>;\r\n  constructor(value:T, ctxKey?: KeysMatching<ExecutionContext, T>) {\r\n    super();\r\n    this.value = value;\r\n    this.ctxKey = ctxKey;\r\n  }\r\n    resolveValue(state:CardGameState, ctx:ExecutionContext, game:CardGame):T{\r\n      if(this.ctxKey){\r\n        (ctx as any)[this.ctxKey] = this.value;\r\n      }\r\n      return this.value;\r\n    }\r\n\r\n  static is(r: Resolver<any>) : r is ResolveConstant<unknown> {\r\n      return r instanceof ResolveConstant;\r\n  }\r\n}\r\n\r\n\r\nexport type PlayerTarget = Resolver<PlayerKey>\r\n\r\nexport interface Ability {\r\n  abilityType: string;\r\n}\r\n\r\nexport interface ChoiceAction {\r\n  getChoices(state:CardGameState, executionContext:ExecutionContext, game:CardGame):CardGameChoiceMove[];\r\n  applyEffect(move:CardGameChoiceMove, state:CardGameState, executionContext:ExecutionContext, game:CardGame):CardGameState;\r\n}\r\n\r\nexport abstract class Effect{\r\n  abstract applyEffect(state:CardGameState, executionContext:ExecutionContext, game:CardGame):CardGameState;\r\n  applyEffectNoFizzle(state:CardGameState, executionContext:ExecutionContext, game:CardGame):CardGameState{\r\n     try{\r\n        return this.applyEffect(state, executionContext, game);\r\n    }catch(e){\r\n        if(!Fizzle.isFizzle(e))throw e;\r\n        return e.returnState;\r\n    }\r\n  }\r\n\r\n  abstract getIcon(): Icon;\r\n}\r\n\r\nexport default class TextTemplate<T extends Component, ARGS extends Component[]=Component[]>{\r\n  template: string;\r\n  regex: RegExp;\r\n  slots: Slot[];\r\n  factory:(...args:ARGS)=>T;\r\n\r\n  static templates:{\r\n    [S in Slot]: TextTemplate<ResolveSlot<S>>[]\r\n  } = {\r\n    Eff: [],\r\n    Player: [],\r\n    N:[],\r\n    Cond:[],\r\n    ChoiceAction:[],\r\n    Ability:[],\r\n    Demos:[],\r\n    Position:[],\r\n  }\r\n\r\n  constructor(slot: GetSlot<T>, template:string, factory:(...args:ARGS)=>T){\r\n    this.template = template;\r\n    const pattern = template\r\n        .toLowerCase()\r\n        .replace(/%\\w+\\s+/g, '(.*\\\\s+|)?')\r\n        .replace(/%\\w+/g, '(.*|)?')\r\n    this.regex = new RegExp('^'+pattern+'$');\r\n    this.factory = factory;\r\n    this.slots = [...this.template.matchAll(/%(\\w+)/gi)].map(match=>match[1]) as Slot[]\r\n    TextTemplate.templates[slot].push(this as any);\r\n  }\r\n\r\n  static parse<SLOT extends Slot>(slot: SLOT, _text:string):ResolveSlot<SLOT>{\r\n    const text = (_text||\"\").trim()\r\n    const templates = TextTemplate.templates[slot] as TextTemplate<ResolveSlot<SLOT>>[];\r\n    const candidates = templates.filter((template:TextTemplate<Component>) => text.toLowerCase().match(template.regex));\r\n    if(candidates.length === 0) throw new Error(`Invalid text for slot ${slot}: ${text}`);\r\n    const errors:Error[] = [];\r\n    const results = candidates.map((template:TextTemplate<Component>)=>{\r\n      try{\r\n        const matches = text.toLowerCase().match(template.regex);\r\n        const subTexts = matches ? matches.splice(1) : [];\r\n        const args = template.slots.map((slot, i)=>{\r\n          return TextTemplate.parse(slot, subTexts[i])\r\n        })\r\n        return template.factory(...args as any, subTexts) as unknown as ResolveSlot<SLOT>;\r\n      }catch(e){\r\n        errors.push(e);\r\n        return undefined;\r\n      }\r\n    }).filter(x=>x);\r\n    if(results.length === 0){\r\n      const errorMessages = _.uniq(errors.map(e=>e.message));\r\n      if(errorMessages.length > 1){\r\n        throw new Error(errorMessages.join(\"; \"));\r\n      }else{\r\n        throw errors[0];\r\n      }\r\n    }\r\n    // TODO: select by shortest depth\r\n    const [result] = results;\r\n    if(!result){\r\n      throw Error()\r\n    }\r\n    return result;\r\n  }\r\n\r\n  static clear() {\r\n    this.templates = {\r\n      Eff: [],\r\n      ChoiceAction:[],\r\n      Player: [],\r\n      N:[],\r\n      Cond:[],\r\n      Ability:[],\r\n      Demos:[],\r\n      Position:[],\r\n    }\r\n  }\r\n}\r\n\r\nexport class Fizzle extends Error{\r\n  isFizzle = true\r\n  returnState: CardGameState;\r\n  constructor(returnState: CardGameState) {\r\n    super(\"Effect Fizzle!\");\r\n    this.returnState = returnState;\r\n  }\r\n  static isFizzle(e:any):e is Fizzle{\r\n    return e.isFizzle;\r\n  }\r\n}","import CardGame, {CardGameState} from \"./CardGame\";\r\nimport {Ability, ChoiceAction, Effect, Fizzle} from \"./Components/TextTemplate\";\r\n\r\nexport type PlayerKey = 'playerOne'|'playerTwo'\r\n\r\nexport type IconModifier = 'plus'|'minus'|'hearts'|'clubs'|'spades'|'diamonds'\r\nexport type Icon = string|{icon:string, modifier?:IconModifier}\r\n\r\nexport abstract class Card{\r\n    cardNumber: number;\r\n    cost: number;\r\n    abstract getName():string;\r\n    abstract getText():string;\r\n\r\n    abstract getIcon():Icon;\r\n\r\n    abstract applyEffect(state:CardGameState, playerKey:PlayerKey, game:CardGame):CardGameState;\r\n\r\n    constructor(cardNumber: number, cost:number) {\r\n        this.cardNumber = cardNumber;\r\n        this.cost = cost;\r\n    }\r\n\r\n\r\n    private preEffect(state:CardGameState, playerKey:PlayerKey):CardGameState{\r\n        const player = state[playerKey];\r\n        const hand = [...player.hand]\r\n        const capitalCost = Math.min(player.capital, this.cost);\r\n        const popCost = this.cost - capitalCost\r\n        hand.splice(hand.indexOf(this.cardNumber), 1);\r\n        return {\r\n            ...state,\r\n            endRoundAfterThisTurn: false,\r\n            [playerKey]: {\r\n                ...player,\r\n                popularity: player.popularity - popCost,\r\n                capital: player.capital - capitalCost,\r\n                hand\r\n            }\r\n        }\r\n    }\r\n\r\n    protected postEffect(state:CardGameState, playerKey:PlayerKey):CardGameState{\r\n        return {\r\n            ...state,\r\n            cardPlayedThisTurn: true,\r\n            endRoundAfterThisTurn: false,\r\n            [playerKey]: {\r\n                ...state[playerKey],\r\n                discardPile: [this.cardNumber, ...state[playerKey].discardPile]\r\n            }\r\n        }\r\n    }\r\n\r\n    play(state:CardGameState, cardNumber:number, game:CardGame):CardGameState{\r\n        const playerKey = state.activePlayer  === 1 ? 'playerOne' : 'playerTwo';\r\n        try{\r\n            const afterPreEffect = this.preEffect(state,playerKey);\r\n            const afterEffect = this.applyEffect(afterPreEffect, playerKey, game);\r\n            return this.postEffect(afterEffect,playerKey);\r\n        }catch(e){\r\n            if(!Fizzle.isFizzle(e)) throw e;\r\n            return this.postEffect(e.returnState, playerKey)\r\n        }\r\n    }\r\n}\r\n\r\nexport class EffectCard extends Card{\r\n    effect: Effect;\r\n    name: string;\r\n    text: string;\r\n\r\n    getName(): string {\r\n        return this.name;\r\n    }\r\n\r\n    getText(): string {\r\n        return this.text;\r\n    }\r\n\r\n    getIcon(): Icon {\r\n        return this.effect.getIcon();\r\n    }\r\n\r\n    constructor(effect:Effect, text:string, name:string, cardNumber:number, cost=1) {\r\n        super(cardNumber, cost);\r\n        this.effect = effect;\r\n        this.text = text;\r\n        this.name = name;\r\n    }\r\n    applyEffect(state: CardGameState, playerKey:PlayerKey, game:CardGame): CardGameState {\r\n        const ctx = {\r\n            playerKey\r\n        }\r\n        return this.effect.applyEffect(state, ctx, game)\r\n    }\r\n}\r\nexport class ChoiceActionCard extends Card{\r\n    choiceAction: ChoiceAction;\r\n    name: string;\r\n    text: string;\r\n    getName(): string {\r\n        return this.name;\r\n    }\r\n\r\n    getText(): string {\r\n        return this.text;\r\n    }\r\n    constructor(choiceAction:ChoiceAction, text:string, name:string,cardNumber:number, cost=1) {\r\n        super(cardNumber, cost);\r\n        this.choiceAction = choiceAction;\r\n        this.text = text;\r\n        this.name = name;\r\n    }\r\n    applyEffect(state: CardGameState, playerKey:PlayerKey, game:CardGame): CardGameState {\r\n        return {\r\n            ...state,\r\n            step:'choice',\r\n            endRoundAfterThisTurn: false,\r\n            cardPlayedThisTurn: true,\r\n            cardBeingPlayed: this.cardNumber,\r\n        }\r\n    }\r\n    protected postEffect(state:CardGameState, playerKey:PlayerKey):CardGameState {\r\n        return state;\r\n    }\r\n    static is(c:Card): c is ChoiceActionCard{\r\n        if(!c) return false;\r\n        return (c as Record<string, any>).hasOwnProperty('choiceAction')\r\n    }\r\n    getIcon(){\r\n        return \"overhead\";\r\n    }\r\n}\r\n\r\nexport class ItemCard extends Card{\r\n    ability: Ability;\r\n    name: string;\r\n    text: string;\r\n    getName(): string {\r\n        return this.name;\r\n    }\r\n\r\n    getText(): string {\r\n        return this.text;\r\n    }\r\n    constructor(ability:Ability, text:string, name:string, cardNumber:number, cost=1) {\r\n        super(cardNumber, cost);\r\n        this.ability = ability;\r\n        this.text = text;\r\n        this.name = name;\r\n    }\r\n\r\n    applyEffect(state: CardGameState): CardGameState {\r\n        return state;\r\n    }\r\n\r\n    protected postEffect(state:CardGameState, playerKey:PlayerKey):CardGameState{\r\n        return {\r\n            ...state,\r\n            cardPlayedThisTurn: true,\r\n            endRoundAfterThisTurn: false,\r\n            [playerKey]: {\r\n                ...state[playerKey],\r\n                board: [this.cardNumber, ...state[playerKey].board]\r\n            }\r\n        }\r\n    }\r\n\r\n    static isItemCard(c:Card):c is ItemCard{\r\n        return (c as Object).hasOwnProperty('ability')\r\n    }\r\n\r\n    getIcon(){\r\n        return \"quill-ink\";\r\n    }\r\n}\r\n","import TextTemplate, {Effect, ExecutionContext, Fizzle, PlayerTarget} from \"../TextTemplate\";\r\nimport CardGame, {CardGamePlayerState, CardGameState} from \"../../CardGame\";\r\nimport _ from 'lodash';\r\nimport {Icon} from \"../../Card\";\r\n\r\ntype KeysMatching<T, V> = {[K in keyof T]-?: T[K] extends V ? K : never}[keyof T];\r\n\r\nexport type CardSource = KeysMatching<CardGamePlayerState, readonly number[]>;\r\nexport type CardDest = KeysMatching<CardGamePlayerState, readonly number[]>;\r\n\r\nclass RandomTransferEffect extends Effect{\r\n    target:PlayerTarget;\r\n    from:CardSource;\r\n    to:CardDest;\r\n    n: number;\r\n    constructor(target:PlayerTarget, from:CardSource, to:CardDest, n:number) {\r\n        super();\r\n        this.target = target;\r\n        this.from = from;\r\n        this.to = to;\r\n        this.n = n;\r\n    }\r\n\r\n    applyEffect(state: CardGameState, ctx:ExecutionContext, game:CardGame): CardGameState {\r\n        let s = state;\r\n        for(let i = 0; i<this.n;i++){\r\n            s = this.transfer(s, ctx, game);\r\n        }\r\n        return s;\r\n    }\r\n    transfer(state: CardGameState, ctx:ExecutionContext, game:CardGame): CardGameState {\r\n        const targetKey = this.target.resolveValue(state, ctx, game);\r\n        const player = state[targetKey];\r\n        const fromPile = [...player[this.from]];\r\n        const toPile = [...player[this.to]];\r\n        if(fromPile.length === 0 ){\r\n            throw new Fizzle(state);\r\n        }\r\n        const drawIndex = Math.floor(Math.random() * fromPile.length);\r\n        toPile.push(...fromPile.splice(drawIndex, 1))\r\n        return  {\r\n            ...state,\r\n            [targetKey]:{\r\n                ...player,\r\n                [this.to]:toPile,\r\n                [this.from]:fromPile\r\n            }\r\n        }\r\n    }\r\n\r\n    getIcon(): Icon{\r\n        if(this.to === 'hand'){\r\n            return this.from === 'deck' ? 'card-draw' : 'card-pickup';\r\n        }\r\n        if(this.from === 'hand'){\r\n            return 'card-random'\r\n        }\r\n        return 'card-exchange';\r\n    }\r\n}\r\nexport class DrawCardEffect extends RandomTransferEffect{\r\n    constructor(target:PlayerTarget, n:number) {\r\n        super(target,'deck', 'hand', n);\r\n    }\r\n    transfer(state: CardGameState, ctx:ExecutionContext, game:CardGame): CardGameState {\r\n        const s = super.transfer(state, ctx, game);\r\n        const targetKey = this.target.resolveValue(state, ctx, game);\r\n        if(!game)debugger\r\n        return game.processEvent(s, 'player_draws', {\r\n            player: targetKey,\r\n            cardNumbers: _.xor(s[targetKey].hand, state[targetKey].hand),\r\n            from: 'deck'\r\n        })\r\n    }\r\n}\r\n\r\n\r\nexport default function setup(){\r\n    new TextTemplate('Eff', '%Player draws? %N cards?', (target:PlayerTarget, n:number)=>new DrawCardEffect(target, n));\r\n    new TextTemplate('Eff', '%Player draws? up to %N cards?', (target:PlayerTarget, n:number)=>new DrawCardEffect(target, n));\r\n    new TextTemplate('Eff', '%Player discards? %N random cards?', (target:PlayerTarget, n:number)=>new RandomTransferEffect(target, 'hand','discardPile', n));\r\n    new TextTemplate('Eff', '%Player discards? the top card (?:from|of) (?:their|your) deck', (target:PlayerTarget)=>new RandomTransferEffect(target, 'deck','discardPile', 1));\r\n    new TextTemplate('Eff', '%Player discards? %N cards? from the top of (?:their|your) deck', (target:PlayerTarget, n:number)=>new RandomTransferEffect(target, 'deck','discardPile', n));\r\n    new TextTemplate('Eff', '%Player draws? %N random cards? from (?:their|your) discard pile', (target:PlayerTarget, n:number)=>new RandomTransferEffect(target, 'discardPile','hand', n));\r\n}","import TextTemplate, {Effect, ExecutionContext} from \"../TextTemplate\";\r\nimport CardGame, {CardGameState} from \"../../CardGame\";\r\nimport {Icon, PlayerKey} from \"../../Card\";\r\n\r\nexport default class ListEffect extends Effect{\r\n    a:Effect;\r\n    b:Effect;\r\n    constructor(a:Effect, b:Effect) {\r\n        super();\r\n        this.a = a;\r\n        this.b = b;\r\n    }\r\n    applyEffect(state: CardGameState, ctx:ExecutionContext, game:CardGame): CardGameState {\r\n        const afterA = this.a.applyEffect(state, ctx, game);\r\n        return this.b.applyEffect(afterA, ctx, game);\r\n    }\r\n\r\n    getIcon(): Icon {\r\n        return this.b.getIcon();\r\n    }\r\n}\r\n\r\nexport function setupListEffects(){\r\n    new TextTemplate('Eff', '%Eff and %Eff', (a:Effect, b:Effect)=>new ListEffect(a,b));\r\n    new TextTemplate('Eff', '%Eff, and %Eff', (a:Effect, b:Effect)=>new ListEffect(a,b));\r\n    new TextTemplate('Eff', '%Eff, %Eff', (a:Effect, b:Effect)=>new ListEffect(a,b));\r\n    new TextTemplate('Eff', '%Eff twice', (a:Effect)=>new ListEffect(a,a));\r\n    new TextTemplate('Eff', '%Eff\\\\. %Eff', (a:Effect, b:Effect)=>new ListEffect(a,b));\r\n    new TextTemplate('Eff', '%Eff then %Eff', (a:Effect, b:Effect)=>new ListEffect(a,b));\r\n    new TextTemplate('Eff', '%Eff, then %Eff', (a:Effect, b:Effect)=>new ListEffect(a,b));\r\n}","import TextTemplate, {Effect, ExecutionContext, PlayerTarget} from \"../TextTemplate\";\r\nimport CardGame, {CardGamePlayerState, CardGameState} from \"../../CardGame\";\r\nimport {Icon, PlayerKey} from \"../../Card\";\r\n\r\ntype KeysMatching<T, V> = { [K in keyof T]-?: T[K] extends V ? K : never }[keyof T];\r\n\r\nexport class ChangePlayerValue extends Effect {\r\n    target:PlayerTarget\r\n    amount:number;\r\n    field: KeysMatching<CardGamePlayerState, number>;\r\n    constructor(target:PlayerTarget, amount:number, field: KeysMatching<CardGamePlayerState, number>) {\r\n        super();\r\n        this.target=target;\r\n        this.amount=amount;\r\n        this.field=field;\r\n    }\r\n    applyEffect(state: CardGameState, ctx:ExecutionContext, game:CardGame): CardGameState {\r\n        const {field} = this;\r\n        const targetKey = this.target.resolveValue(state, ctx, game);\r\n        return   {\r\n            ...state,\r\n            [targetKey]:{\r\n                ...state[targetKey],\r\n                [field]:state[targetKey][field] + this.amount\r\n            }\r\n        }\r\n        /*return game.processEvent(s, 'player_take_damage', {\r\n            amount: this.amount,\r\n            player: targetKey\r\n        })*/\r\n    }\r\n    getIcon(): Icon {\r\n        const icon = this.field === 'popularity' ? 'star' : 'capital';\r\n        const modifier = this.amount > 0 ? 'plus' : 'minus';\r\n        return {icon, modifier};\r\n    }\r\n}\r\n\r\nexport default function setup(){\r\n\r\n    new TextTemplate('Eff', '%Player loses? %N popularity', (target:PlayerTarget, n:number)=>new ChangePlayerValue(target, -n, 'popularity'));\r\n    new TextTemplate('Eff', '%Player gains? %N popularity', (target:PlayerTarget, n:number)=>new ChangePlayerValue(target, n, 'popularity'));\r\n    new TextTemplate('Eff', '%Player gains? %N political capital', (target:PlayerTarget, n:number)=>new ChangePlayerValue(target, n, 'capital'));\r\n    new TextTemplate('Eff', '%Player loses? %N political capital', (target:PlayerTarget, n:number)=>new ChangePlayerValue(target, -n, 'capital'));\r\n\r\n}","import TextTemplate, {Effect, ExecutionContext, PlayerTarget, Resolver} from \"../TextTemplate\";\r\nimport CardGame, {CardGameState} from \"../../CardGame\";\r\nimport {PlayerKey} from \"../../Card\";\r\nimport {hasTarget, resolvePlayerContextually} from \"../setup\";\r\n\r\nexport class ConditionalEffect extends Effect{\r\n    eff:Effect;\r\n    condition:Resolver<boolean>;\r\n    constructor(eff:Effect, condition:Resolver<boolean>) {\r\n        super();\r\n        this.eff = eff;\r\n        this.condition = condition;\r\n    }\r\n    applyEffect(state: CardGameState, ctx:ExecutionContext, game:CardGame): CardGameState {\r\n        if(this.condition.resolveValue(state, ctx, game)){\r\n            return this.eff.applyEffect(state, ctx, game);\r\n        }\r\n        return state;\r\n    }\r\n    getIcon(){\r\n        return this.eff.getIcon();\r\n    }\r\n}\r\n\r\nexport default function setup(){\r\n    const reversedConditionalFactory = (eff:Effect, cond:Resolver<boolean>)=>{\r\n        if(hasTarget(eff) && hasTarget(cond) && cond.target === resolvePlayerContextually){\r\n            cond.target = eff.target;\r\n            eff.target = resolvePlayerContextually;\r\n        }\r\n        return new ConditionalEffect(eff,cond)\r\n    };\r\n    new TextTemplate('Eff', '%Eff, if %Cond', reversedConditionalFactory);\r\n    new TextTemplate('Eff', '%Eff if %Cond', reversedConditionalFactory);\r\n    new TextTemplate('Eff', 'if %Cond, %Eff', (cond:Resolver<boolean>, eff:Effect)=>new ConditionalEffect(eff,cond));\r\n}","import TextTemplate, {Effect, ExecutionContext, PlayerTarget, Resolver} from \"../TextTemplate\";\r\nimport CardGame, {CardGamePlayerState, CardGameState} from \"../../CardGame\";\r\nimport {PlayerKey} from \"../../Card\";\r\n\r\nexport class PlayerLessThanCondition implements Resolver<boolean>{\r\n    target:PlayerTarget\r\n    n:number\r\n    mapping:(target:CardGamePlayerState)=>number\r\n    constructor(target:PlayerTarget, n:number, mapping:(target:CardGamePlayerState)=>number) {\r\n        this.target = target;\r\n        this.n = n;\r\n        this.mapping = mapping;\r\n    }\r\n    resolveValue(state: CardGameState, ctx: ExecutionContext, game:CardGame){\r\n        const targetKey = this.target.resolveValue(state, ctx, game);\r\n        const player = state[targetKey];\r\n        return this.mapping(player) < this.n;\r\n    }\r\n}\r\n\r\nexport default function setup(){\r\n    new TextTemplate(\r\n        'Cond',\r\n        '%Player\\\\s?(?:has|have) less than %N cards in (?:their|your) hand',\r\n        (target:PlayerTarget, n:number) => new PlayerLessThanCondition(target, n, player=>player.hand.length)\r\n    );\r\n    new TextTemplate(\r\n        'Cond',\r\n        '%Player\\\\s?(?:has|have) less than %N popularity',\r\n        (target:PlayerTarget, n:number) => new PlayerLessThanCondition(target, n, player=>player.popularity)\r\n    );\r\n}","import TextTemplate, {Ability, Effect, ExecutionContext, PlayerTarget} from \"../TextTemplate\";\r\nimport {PlayerKey} from \"../../Card\";\r\nimport {CardSource} from \"../Effects/RandomTransferEffect\";\r\nimport CardGame, {CardGameState} from \"../../CardGame\";\r\nimport {resolveActivePlayer} from \"../setup\";\r\n\r\nexport type TargetedEventType = 'player_draws'|'turn_start';\r\nexport type EventType = TargetedEventType|'round_end';\r\nexport type EventParams<E extends EventType> =\r\n    E extends 'player_draws' ? PlayerDrawsEventParams\r\n    : E extends 'turn_start' ?  {player: PlayerKey}\r\n    : E extends 'round_end' ?  {}\r\n    : never;\r\n\r\n\r\n\r\nexport type PlayerDrawsEventParams = {\r\n    player: PlayerKey,\r\n    cardNumbers: number[],\r\n    from: CardSource\r\n}\r\n\r\nexport type PlayerTakesDamageEventParams = {\r\n    player: PlayerKey,\r\n    amount: number\r\n}\r\n\r\n\r\n\r\nexport class OnEventAbility<E extends EventType> implements Ability{\r\n    abilityType = 'onEventAbility';\r\n    eventType: E;\r\n    eff: Effect;\r\n\r\n    constructor(eventType:E, eff:Effect) {\r\n        this.eventType = eventType;\r\n        this.eff = eff;\r\n    }\r\n\r\n    trigger(state:CardGameState, eventParams: EventParams<E>, ctx:ExecutionContext, game:CardGame):CardGameState{\r\n        const triggerCtx:ExecutionContext = {\r\n            ...ctx,\r\n            ...((eventParams as any)?.player && {lastPlayer:(eventParams as any).player}),\r\n            eventType: this.eventType,\r\n            eventParams\r\n        }\r\n        return this.eff.applyEffect(state, triggerCtx, game);\r\n    }\r\n\r\n    static isOnEventAbility<E extends EventType>(a:Ability, eventType:E): a is OnEventAbility<E>{\r\n        return a.abilityType === 'onEventAbility' && (a as OnEventAbility<any>).eventType === eventType;\r\n    }\r\n\r\n}\r\n\r\nclass FilteredOnEventAbility<E extends TargetedEventType> extends OnEventAbility<E>{\r\n    filter: PlayerTarget;\r\n\r\n    constructor(eventType:E, eff:Effect, filter: PlayerTarget) {\r\n        super(eventType, eff);\r\n        this.filter = filter\r\n    }\r\n    trigger(state:CardGameState, eventParams: EventParams<E>, ctx:ExecutionContext, game:CardGame):CardGameState{\r\n        if(this.filter.resolveValue(state, ctx, game) != eventParams.player) return state;\r\n        return super.trigger(state, eventParams, ctx, game);\r\n    }\r\n}\r\n\r\nexport function setup(){\r\n    const playerEventTypes:{eventType:TargetedEventType, text:string}[] = [\r\n        {eventType: 'player_draws', text: 'draws? a card'},\r\n    ]\r\n    playerEventTypes.forEach(({eventType, text})=>{\r\n      new TextTemplate('Ability', `When(?:ever) %Player ${text}, %Eff`, (target:PlayerTarget, eff:Effect)=> new FilteredOnEventAbility(eventType, eff, target));\r\n      new TextTemplate('Ability', `When(?:ever) a player ${text}, %Eff`, (eff:Effect)=> new OnEventAbility(eventType, eff));\r\n    });\r\n    new TextTemplate('Ability', `At the start of each turn, %Eff`, (eff:Effect)=> new OnEventAbility('turn_start', eff));\r\n    new TextTemplate('Ability', `At the start of your turn, %Eff`, (eff:Effect)=> new FilteredOnEventAbility('turn_start', eff, resolveActivePlayer));\r\n\r\n    new TextTemplate('Ability', `At the end of each round, %Eff`, (eff:Effect)=> new OnEventAbility('round_end', eff));\r\n}","import TextTemplate, {ChoiceAction, Effect, ExecutionContext, Resolver} from \"../TextTemplate\";\r\nimport CardGame, {CardGameChoiceMove, CardGameState} from \"../../CardGame\";\r\n\r\nexport class ChooseAPlayer implements ChoiceAction{\r\n    eff:Effect;\r\n    constructor(eff:Effect) {\r\n        this.eff = eff;\r\n    }\r\n\r\n    applyEffect(move: CardGameChoiceMove, state: CardGameState, ctx: ExecutionContext, game: CardGame): CardGameState {\r\n        return this.eff.applyEffect(state, {\r\n            ...ctx,\r\n            lastPlayer: move.choice === 1 ? 'playerOne' : 'playerTwo'\r\n        }, game)\r\n    }\r\n\r\n    getChoices(state: CardGameState, ctx:ExecutionContext, game: CardGame):CardGameChoiceMove[]{\r\n        return [{type: 'choice', choice:1}, {type: 'choice', choice: 2}];\r\n    }\r\n\r\n}\r\n\r\nexport function setupChooseAPlayer(){\r\n    new TextTemplate('ChoiceAction', 'Choose a player. %Eff', (eff:Effect)=> new ChooseAPlayer(eff))\r\n}","import TextTemplate, {Effect, ExecutionContext, PlayerTarget, ResolveConstant, Resolver} from \"../TextTemplate\";\r\nimport CardGame, {CardGamePlayerState, CardGameState} from \"../../CardGame\";\r\nimport {Icon, PlayerKey} from \"../../Card\";\r\nimport {MoveDemographicEffect} from \"./MoveDemographicEffect\";\r\n\r\ntype KeysMatching<T, V> = {[K in keyof T]-?: T[K] extends V ? K : never}[keyof T];\r\nexport abstract class MovePlayerEffect extends Effect{\r\n    target:PlayerTarget\r\n    protected constructor(target:PlayerTarget) {\r\n        super();\r\n        this.target=target;\r\n    }\r\n\r\n    abstract shift(pos:{x:number, y:number},state:CardGameState, ctx:ExecutionContext, game:CardGame): {x:number, y: number};\r\n    abstract getIcon(): Icon;\r\n\r\n    applyEffect(state: CardGameState, ctx:ExecutionContext, game:CardGame): CardGameState {\r\n        const playerKey = this.target.resolveValue(state, ctx, game);\r\n\r\n        return   {\r\n            ...state,\r\n            [playerKey]: {\r\n                ...state[playerKey],\r\n                position: this.shift(state[playerKey].position, state, ctx, game)\r\n            }\r\n        }\r\n    }\r\n}\r\nconst MIN_DISTANCE = 0.01;\r\nexport class MovePlayerTowardsPointEffect extends MovePlayerEffect{\r\n    point:Resolver<{x:number, y:number}>\r\n    stepSize:number;\r\n    constructor(target:PlayerTarget, point:Resolver<{x:number, y:number}>,stepSize:number) {\r\n        super(target);\r\n        this.point = point;\r\n        this.stepSize = stepSize;\r\n    }\r\n     static shiftTowardsPoint(point:Resolver<{x:number, y:number}>, stepSize: number, pos: { x: number; y: number }, state:CardGameState, ctx: ExecutionContext, game: CardGame): { x: number; y: number } {\r\n        const target = point.resolveValue(state, ctx, game)\r\n        const deltaX = target.x - pos.x;\r\n        const deltaY = target.y - pos.y;\r\n        const deltaMag = Math.sqrt(deltaX*deltaX + deltaY*deltaY);\r\n        const clampedStepSize = stepSize > 0 ? Math.min(deltaMag - MIN_DISTANCE, stepSize) : stepSize;\r\n        const clamp = (n:number)=>Math.max(-1, Math.min(1, n));\r\n        return {\r\n            x: clamp(pos.x + deltaX/deltaMag * clampedStepSize),\r\n            y: clamp(pos.y + deltaY/deltaMag * clampedStepSize),\r\n        }\r\n    }\r\n    shift(pos: { x: number; y: number }, state:CardGameState, ctx: ExecutionContext, game: CardGame): { x: number; y: number } {\r\n        return MovePlayerTowardsPointEffect.shiftTowardsPoint(this.point, this.stepSize, pos, state, ctx, game);\r\n    }\r\n    getIcon(): Icon{\r\n        return {\r\n            icon: 'move',\r\n            modifier: MoveDemographicEffect.getIconModiferFromPoint(this.point)\r\n        }\r\n    }\r\n\r\n}\r\nexport function setupMovePlayer(){\r\n    new TextTemplate('Eff',\r\n        '%Player shift towards %Position',\r\n        (playerTarget:PlayerTarget, point:Resolver<{x:number, y:number}>)=>new MovePlayerTowardsPointEffect(playerTarget, point, 2/21));\r\n    new TextTemplate('Eff',\r\n        '%Player shift away from %Position',\r\n        (playerTarget:PlayerTarget, point:Resolver<{x:number, y:number}>)=>new MovePlayerTowardsPointEffect(playerTarget, point, -2/21));\r\n\r\n}","import {ExecutionContext, Fizzle, Resolver} from \"../TextTemplate\";\r\nimport {CardGameState} from \"../../CardGame\";\r\n\r\nexport class ContextualExtreme implements Resolver<{ x: number, y: number }> {\r\n    resolveValue(state: CardGameState, ctx: ExecutionContext): { x: number, y: number } {\r\n        if (!ctx.lastExtreme) throw new Fizzle(state)\r\n        return ctx.lastExtreme;\r\n    }\r\n}","import TextTemplate, {Effect, ExecutionContext, PlayerTarget, ResolveConstant, Resolver} from \"../TextTemplate\";\r\nimport CardGame, {CardGamePlayerState, CardGameState} from \"../../CardGame\";\r\nimport {MovePlayerTowardsPointEffect} from \"./MovePlayerEffect\";\r\nimport {ContextualExtreme} from \"../ChoiceActions/ContextualExtreme\";\r\nimport _ from 'lodash'\r\nimport {Icon, IconModifier} from \"../../Card\";\r\n\r\nexport type Point = {x:number, y:number};\r\nexport const EXTREMES = {\r\n    hearts: {x:1, y:-1},\r\n    clubs: {x:-1, y:-1},\r\n    diamonds: {x:1, y:1},\r\n    spades: {x:-1, y:1},\r\n}\r\n\r\nexport abstract class MoveDemographicEffect extends Effect{\r\n    demos:Resolver<number[]>\r\n    protected constructor(demos:Resolver<number[]>) {\r\n        super();\r\n        this.demos=demos;\r\n    }\r\n\r\n    abstract shift(pos:{x:number, y:number},state:CardGameState, ctx:ExecutionContext, game:CardGame): {x:number, y: number};\r\n    abstract getIcon(): Icon;\r\n\r\n    applyEffect(state: CardGameState, ctx:ExecutionContext, game:CardGame): CardGameState {\r\n        const indexes = this.demos.resolveValue(state, ctx, game);\r\n\r\n        return   {\r\n            ...state,\r\n            demographics: state.demographics.map((demo, i)=>indexes.includes(i)\r\n                ? this.shift(demo, state, ctx, game)\r\n                : demo\r\n            )\r\n        }\r\n    }\r\n\r\n    static getIconModiferFromPoint(pointResolver: Resolver<Point>): IconModifier|undefined {\r\n        if(!ResolveConstant.is(pointResolver)){\r\n            return undefined;\r\n        }\r\n        return pointResolver.value === EXTREMES.clubs ? 'clubs' :\r\n            pointResolver.value === EXTREMES.hearts ? 'hearts' :\r\n            pointResolver.value === EXTREMES.diamonds ? 'diamonds' :\r\n            pointResolver.value === EXTREMES.spades ? 'spades' :\r\n            undefined;\r\n    }\r\n}\r\nexport class MoveDemographicTowardsPointEffect extends MoveDemographicEffect{\r\n    point:Resolver<Point>;\r\n    stepSize:number;\r\n    constructor(demos:Resolver<number[]>, point:Resolver<{x:number, y:number}>,stepSize:number) {\r\n        super(demos);\r\n        this.point = point;\r\n        this.stepSize = stepSize;\r\n    }\r\n\r\n    shift(pos: { x: number; y: number }, state:CardGameState, ctx: ExecutionContext, game: CardGame): { x: number; y: number } {\r\n        return MovePlayerTowardsPointEffect.shiftTowardsPoint(this.point, this.stepSize, pos, state, ctx, game);\r\n    }\r\n\r\n    getIcon(): Icon {\r\n        const icon = this.stepSize < 0 ? 'expand' : 'contract';\r\n\r\n        const modifier = MoveDemographicEffect.getIconModiferFromPoint(this.point);\r\n        return {\r\n            icon,\r\n            modifier\r\n        };\r\n    }\r\n\r\n}\r\n\r\nclass resolveAllDemographics implements Resolver<number[]>{\r\n    resolveValue(state: CardGameState, ctx: ExecutionContext){\r\n        return state.demographics.map((_,i)=>i);\r\n    }\r\n}\r\n\r\nclass resolveFollowers implements Resolver<number[]>{\r\n    playerTarget: PlayerTarget\r\n    constructor(playerTarget: PlayerTarget) {\r\n        this.playerTarget = playerTarget;\r\n    }\r\n\r\n    resolveValue(state: CardGameState, ctx: ExecutionContext, game:CardGame){\r\n        const target = this.playerTarget.resolveValue(state, ctx, game) === 'playerOne' ? 1 : 2;\r\n        return state.demographics\r\n            .map((demo,i)=>({demo, i}))\r\n            .filter(({demo})=>game.getDemographicVote(state,demo) === target)\r\n            .map(({i})=>i)\r\n    }\r\n}\r\n\r\nclass resolveUndecided implements Resolver<number[]>{\r\n    resolveValue(state: CardGameState, ctx: ExecutionContext, game:CardGame){\r\n        return state.demographics\r\n            .map((demo,i)=>({demo, i}))\r\n            .filter(({demo})=>game.getDemographicVote(state,demo) === undefined)\r\n            .map(({i})=>i)\r\n    }\r\n}\r\nclass ListDemographic implements Resolver<number[]>{\r\n    a:Resolver<number[]>;\r\n    b:Resolver<number[]>;\r\n\r\n    constructor(a:Resolver<number[]>, b:Resolver<number[]>) {\r\n        this.a = a;\r\n        this.b = b;\r\n    }\r\n\r\n    resolveValue(state: CardGameState, ctx: ExecutionContext, game:CardGame){\r\n        const aDemos = this.a.resolveValue(state, ctx, game);\r\n        const bDemos = this.b.resolveValue(state, ctx, game);\r\n        return _.uniq([...aDemos, ...bDemos]);\r\n    }\r\n}\r\nclass resolveQuadrantDemographics implements Resolver<number[]>{\r\n    point:Resolver<{x:number, y:number}>\r\n    demos:Resolver<number[]>;\r\n\r\n    constructor(demos: Resolver<number[]>, point: Resolver<{ x: number; y: number }>) {\r\n        this.point = point;\r\n        this.demos = demos\r\n    }\r\n    resolveValue(state: CardGameState, ctx: ExecutionContext, game:CardGame){\r\n        const {x,y} = this.point.resolveValue(state, ctx, game);\r\n        const inQuad = state.demographics\r\n            .map((demo,i)=>({demo, i}))\r\n            .filter(({demo})=> Math.sign(x)===Math.sign(demo.x) && Math.sign(y)===Math.sign(demo.y))\r\n            .map(({i})=>i)\r\n        const inSource = this.demos.resolveValue(state, ctx, game);\r\n        return _.intersectionWith(inQuad, inSource);\r\n    }\r\n}\r\n\r\nexport class ResolvePlayerPosition implements Resolver<{x:number, y:number}>{\r\n        playerTarget: PlayerTarget\r\n    constructor(playerTarget: PlayerTarget) {\r\n        this.playerTarget = playerTarget;\r\n    }\r\n\r\n  resolveValue(state: CardGameState, ctx: ExecutionContext, game:CardGame) {\r\n    const target = this.playerTarget.resolveValue(state, ctx, game)\r\n    return state[target].position;\r\n  }\r\n}\r\n\r\nexport function setupMoveDemographics(){\r\n    new TextTemplate('Demos', '(?:All )demographics', () => new resolveAllDemographics());\r\n    new TextTemplate('Demos', '%Player followers', (playerTarget:PlayerTarget) => new resolveFollowers(playerTarget));\r\n    new TextTemplate('Demos', 'undecided voters', () => new resolveUndecided());\r\n    new TextTemplate('Demos', `%Demos in that quadrant`, (demos:Resolver<number[]>) => new resolveQuadrantDemographics(demos, new ContextualExtreme()));\r\n    new TextTemplate('Demos', '%Demos and %Demos', (a:Resolver<number[]>, b:Resolver<number[]>) => new ListDemographic(a,b));\r\n\r\n\r\n    Object.entries(EXTREMES).forEach(([extreme, position]) => {\r\n        new TextTemplate('Position', `the ${extreme} (?:extreme|quadrant)`, () => new ResolveConstant(position, 'lastExtreme'));\r\n        new TextTemplate('Demos', `%Demos in the ${extreme} quadrant`, (demos:Resolver<number[]>) => new resolveQuadrantDemographics(demos, new ResolveConstant(position, 'lastExtreme')))\r\n    });\r\n\r\n    new TextTemplate('Position', 'the cente?re?', () => new ResolveConstant({x:0, y:0}));\r\n    new TextTemplate('Position', '%Player', (playerTarget:PlayerTarget) => new ResolvePlayerPosition(playerTarget));\r\n\r\n    new TextTemplate('Eff',\r\n        '%Demos shift towards %Position',\r\n        (demos:Resolver<number[]>, point:Resolver<{x:number, y:number}>)=>new MoveDemographicTowardsPointEffect(demos, point, 2/21));\r\n    new TextTemplate('Eff',\r\n        '%Demos shift away from %Position',\r\n        (demos:Resolver<number[]>, point:Resolver<{x:number, y:number}>)=>new MoveDemographicTowardsPointEffect(demos, point, -2/21));\r\n\r\n}","import TextTemplate, {ChoiceAction, Effect, ExecutionContext} from \"../TextTemplate\";\r\nimport CardGame, {CardGameChoiceMove, CardGameState} from \"../../CardGame\";\r\nimport {EXTREMES} from \"../Effects/MoveDemographicEffect\";\r\nimport {ContextualExtreme} from \"./ContextualExtreme\";\r\n\r\nconst EXTREMES_BY_ID = {\r\n    1: EXTREMES.hearts,\r\n    2: EXTREMES.clubs,\r\n    3: EXTREMES.diamonds,\r\n    4: EXTREMES.spades\r\n};\r\nexport const ID_BY_EXTREME:Record<string, number> = {\r\n    'hearts': 1,\r\n    'clubs': 2,\r\n    'diamonds':3,\r\n    'spades': 4\r\n}\r\n\r\nexport class ChooseAnExtreme implements ChoiceAction{\r\n    eff:Effect;\r\n    constructor(eff:Effect) {\r\n        this.eff = eff;\r\n    }\r\n\r\n    applyEffect(move: CardGameChoiceMove, state: CardGameState, ctx: ExecutionContext, game: CardGame): CardGameState {\r\n        return this.eff.applyEffect(state, {\r\n            ...ctx,\r\n            lastExtreme: EXTREMES_BY_ID[move.choice as 1|2|3|4]\r\n        }, game)\r\n    }\r\n\r\n    getChoices(state: CardGameState, ctx:ExecutionContext, game: CardGame):CardGameChoiceMove[]{\r\n        return [{type: 'choice', choice:1}, {type: 'choice', choice: 2},{type: 'choice', choice:3}, {type: 'choice', choice: 4}];\r\n    }\r\n\r\n}\r\n\r\nexport function setupChooseAnExtreme(){\r\n    new TextTemplate('ChoiceAction', 'Choose an extreme. %Eff', (eff:Effect)=> new ChooseAnExtreme(eff))\r\n    new TextTemplate('Position', 'that extreme', (e)=> new ContextualExtreme())\r\n}","import TextTemplate, {ChoiceAction, Effect, ExecutionContext, Resolver} from \"../TextTemplate\";\r\nimport CardGame, {CardGameChoiceMove, CardGameState} from \"../../CardGame\";\r\n\r\nexport class ChooseOne implements ChoiceAction{\r\n    a:Effect;\r\n    b:Effect;\r\n    aText:string;\r\n    bText: string;\r\n    constructor(a:Effect, b:Effect, aText:string, bText: string) {\r\n        this.a = a;\r\n        this.b = b;\r\n        this.aText = aText;\r\n        this.bText = bText;\r\n    }\r\n\r\n    applyEffect(move: CardGameChoiceMove, state: CardGameState, ctx: ExecutionContext, game: CardGame): CardGameState {\r\n        const eff = move.choice === 1 ? this.a : this.b;\r\n        return eff.applyEffect(state, ctx, game)\r\n    }\r\n\r\n    getChoices(state: CardGameState, ctx:ExecutionContext, game: CardGame):CardGameChoiceMove[]{\r\n        return [{type: 'choice', choice:1}, {type: 'choice', choice: 2}];\r\n    }\r\n}\r\n\r\nexport function setupChooseOne(){\r\n    new TextTemplate('ChoiceAction', 'Choose one: %Eff or %Eff', (a:Effect, b:Effect, [aText, bText]:string[])=> new ChooseOne(a, b, aText, bText))\r\n}","import TextTemplate, {Effect, ExecutionContext, PlayerTarget, Resolver} from \"../TextTemplate\";\r\nimport CardGame, {CardGamePlayerState, CardGameState} from \"../../CardGame\";\r\nimport {PlayerKey} from \"../../Card\";\r\n\r\nexport class PlayerInQuadrantCondition implements Resolver<boolean>{\r\n    target:PlayerTarget;\r\n    extreme: Resolver<{x:number, y:number}>;\r\n    constructor(target:PlayerTarget, extreme: Resolver<{x:number, y:number}>) {\r\n        this.target = target;\r\n        this.extreme = extreme;\r\n    }\r\n    resolveValue(state: CardGameState, ctx: ExecutionContext, game:CardGame){\r\n        const quad = this.extreme.resolveValue(state, ctx, game);\r\n        const playerKey = this.target.resolveValue(state, ctx, game);\r\n        const {position} = state[playerKey];\r\n        return Math.sign(position.x) === Math.sign(quad.x) && Math.sign(position.y) === Math.sign(quad.y)\r\n    }\r\n}\r\n\r\nexport default function setupPlayerPositionCondition(){\r\n    new TextTemplate(\r\n        'Cond',\r\n        '%Player (?:is|are) in %Position',\r\n        (target:PlayerTarget, pos:Resolver<{x:number, y:number}>) => new PlayerInQuadrantCondition(target, pos)\r\n    );\r\n}","import {setupListEffects} from './Effects/ListEffect';\r\nimport setupDraw from './Effects/RandomTransferEffect';\r\nimport setupDamage from './Effects/ChangePlayerValue';\r\nimport setupConditional from './Effects/ConditionalEffect'\r\nimport setupLessThan from './GameConditions/PlayerLessThanCondition'\r\nimport {setup as setupEventAbilities} from './Abilities/OnEventAbility'\r\nimport TextTemplate, {Effect, ExecutionContext, PlayerTarget} from \"./TextTemplate\";\r\nimport {PlayerKey} from \"../Card\";\r\nimport numberToWords from 'number-to-words';\r\nimport {setupChooseAPlayer} from \"./ChoiceActions/ChooseAPlayer\";\r\nimport {setupMoveDemographics} from './Effects/MoveDemographicEffect'\r\nimport {setupMovePlayer} from \"./Effects/MovePlayerEffect\";\r\nimport {setupChooseAnExtreme} from \"./ChoiceActions/ChooseAnExtreme\";\r\nimport {setupChooseOne} from \"./ChoiceActions/ChooseOne\";\r\nimport setupPlayerPositionCondition from \"./GameConditions/PlayerPositionCondition\";\r\n\r\nexport interface HasTarget{\r\n    target: PlayerTarget;\r\n}\r\n\r\nexport function hasTarget(x:any):x is HasTarget{\r\n    return x.hasOwnProperty(\"target\");\r\n}\r\n\r\nexport const resolveActivePlayer:PlayerTarget = {\r\n    resolveValue(_, ctx:ExecutionContext):PlayerKey {\r\n        ctx.lastPlayer = ctx.playerKey;\r\n        return ctx.playerKey;\r\n    }\r\n}\r\nexport const resolveOpponent:PlayerTarget = {\r\n    resolveValue(_, ctx):PlayerKey {\r\n        const target =  ctx.playerKey === 'playerOne' ? 'playerTwo' : 'playerOne';\r\n        ctx.lastPlayer = target;\r\n        return target;\r\n    }\r\n}\r\nexport const resolvePlayerContextually:PlayerTarget = {\r\n    resolveValue(_, ctx):PlayerKey {\r\n        return ctx.lastPlayer || ctx.playerKey\r\n    }\r\n}\r\n\r\n\r\nexport default function setupEffects() {\r\n        new TextTemplate('N',`a`,()=>1)\r\n    for(let n = 0; n < 25;n++){\r\n        new TextTemplate('N',numberToWords.toWords(n),()=>n)\r\n        new TextTemplate('N',`${n}`,()=>n)\r\n    }\r\n    new TextTemplate('Player','yourself',()=>resolveActivePlayer)\r\n    new TextTemplate('Player','you',()=>resolveActivePlayer)\r\n    new TextTemplate('Player','your',()=>resolveActivePlayer)\r\n    new TextTemplate('Player','your opponent',()=>resolveOpponent)\r\n    new TextTemplate('Player','your opponent\\'?s',()=>resolveOpponent)\r\n    new TextTemplate('Player','the other player',()=>resolveOpponent)\r\n    new TextTemplate('Player','they',()=>resolvePlayerContextually)\r\n    new TextTemplate('Player','them',()=>resolvePlayerContextually)\r\n    new TextTemplate('Player','their',()=>resolvePlayerContextually)\r\n    new TextTemplate('Player','that player',()=>resolvePlayerContextually)\r\n    new TextTemplate('Player','',()=>resolvePlayerContextually)\r\n    new TextTemplate('Eff','%Eff again',(e:Effect)=>e)\r\n    setupListEffects();\r\n    setupDraw();\r\n    setupDamage();\r\n    setupConditional();\r\n    setupLessThan();\r\n    setupEventAbilities();\r\n    setupMoveDemographics();\r\n    setupChooseAPlayer();\r\n    setupMovePlayer();\r\n    setupChooseAnExtreme();\r\n    setupChooseOne()\r\n    setupPlayerPositionCondition()\r\n}","import _ from 'lodash';\r\n\r\nexport function createStartingDemographics(): { x: number, y: number }[] {\r\n    /*\r\n    return new Array(500).fill(0).map(()=>({\r\n\r\n        x: Math.random()*2-1,\r\n        y: Math.random()*2-1,\r\n    }))\r\n    */\r\n    const RAND_COUNT = 6;\r\n    const randoms = new Array(RAND_COUNT).fill(0).map(()=>({\r\n           x: Math.random()*0.9,\r\n           y: Math.random()*0.9\r\n       }))\r\n   const eighth =  [\r\n       {x: 0.2001, y:0},\r\n         {x: 0.15, y: 0.15}, {x: 0.4, y: 0.1}, {x: 0.7, y: 0.1},\r\n         {x:0.05, y:0.05}, {x:0.3, y:0.3}, {x:0.45, y:0.45}, {x:0.75, y:0.7},\r\n         {x: 0, y: 0.9}, {x: 0.1, y: 0.9},\r\n        {x: 0, y: 0},  {x: 0.4, y:0},\r\n       ...randoms\r\n      ]\r\n   const quadrant=  flipAcrossDiagonal(eighth);\r\n   const all = reflectAcrossBothAxes(quadrant);\r\n   return mergeByDistance(all)\r\n}\r\n\r\nfunction flipAcrossDiagonal(eight: { x: number, y: number }[] ): { x: number, y: number }[] {\r\n   return eight.flatMap(coord => ([\r\n       coord,\r\n      {x:coord.y, y:coord.x}\r\n   ]));\r\n\r\n}\r\nfunction reflectAcrossBothAxes(quadrant: { x: number, y: number }[] ): { x: number, y: number }[] {\r\n   return quadrant.flatMap(coord => ([\r\n       coord,\r\n      {x: -1 *coord.x, y: coord.y},\r\n      {x: coord.x, y: -1 *coord.y},\r\n      {x: -1 *coord.x, y: -1 *coord.y}\r\n   ]));\r\n}\r\n\r\nfunction mergeByDistance(points: { x: number, y: number }[], thresholdSquared=0.005 ): { x: number, y: number }[] {\r\n    const pointGroups:{ x: number, y: number }[][] = []\r\n    for(let point of points){\r\n        let putInGroup = false;\r\n        for(let group of pointGroups){\r\n            const [other] = group;\r\n            const dx = other.x - point.x;\r\n            const dy = other.y - point.y;\r\n            const distSquared = dx*dx + dy*dy;\r\n            if(distSquared < thresholdSquared){\r\n               group.push(point);\r\n               putInGroup = true;\r\n               break;\r\n            }\r\n        }\r\n        if(!putInGroup){\r\n            pointGroups.push([point]);\r\n        }\r\n    }\r\n    return pointGroups.map(group => group.map(({x,y})=>({x:x/group.length,y:y/group.length})).reduce((a,b)=>({\r\n        x: a.x + b.x,\r\n        y: a.y + b.y,\r\n    })))\r\n}","import {Game, GameStatus} from \"../mcts/mcts\";\r\nimport chalk from 'chalk'\r\nimport {Card, ChoiceActionCard, EffectCard, ItemCard, PlayerKey} from \"./Card\";\r\nimport {DrawCardEffect} from \"./Components/Effects/RandomTransferEffect\";\r\nimport {resolveActivePlayer, resolveOpponent} from \"./Components/setup\";\r\nimport TextTemplate, {ChoiceAction, Fizzle} from \"./Components/TextTemplate\";\r\nimport {ConditionalEffect} from \"./Components/Effects/ConditionalEffect\";\r\nimport {EventParams, EventType, OnEventAbility} from \"./Components/Abilities/OnEventAbility\";\r\nimport _ from 'lodash'\r\nimport {createStartingDemographics} from \"./CreateStartingDemographics\";\r\nimport ListEffect from \"./Components/Effects/ListEffect\";\r\nimport {ChangePlayerValue} from \"./Components/Effects/ChangePlayerValue\";\r\n\r\n\r\nexport type CardGameChain = CardGameMove|CardGameMove[]\r\n\r\nexport interface CardGamePlayerState {\r\n    readonly popularity: number;\r\n    readonly capital: number;\r\n    readonly position: {readonly x: number,  readonly y: number};\r\n    readonly hand: readonly number[];\r\n    readonly board: readonly number[];\r\n    readonly discardPile: readonly number[];\r\n    readonly deck: readonly number[];\r\n}\r\n\r\nexport interface CardGameState {\r\n    readonly activePlayer: 1|2;\r\n    readonly isFirstTurn: boolean;\r\n    readonly step: 'draw'|'play'|'choice'\r\n    readonly roundsUntilElection: number;\r\n    readonly cardPlayedThisTurn: boolean;\r\n    readonly endRoundAfterThisTurn: boolean;\r\n    readonly demographics: readonly {x:number, y:number}[]\r\n    readonly playerOne: CardGamePlayerState\r\n    readonly playerTwo: CardGamePlayerState;\r\n    readonly cardBeingPlayed?:number,\r\n    readonly log?:string[],\r\n}\r\n\r\ninterface CardGamePlayCardMove {type:\"play\"; cardNumber:number}\r\ninterface CardGameDiscardCardMove{type:\"discard\"; cardNumber:number}\r\ninterface CardGameEndMove {type:\"end\"}\r\nexport interface CardGameChoiceMove {type:\"choice\", choice:number}\r\nexport type CardGameMove = CardGameEndMove | CardGamePlayCardMove | CardGameDiscardCardMove | CardGameChoiceMove;\r\n\r\nexport const POP_RANGE = 1/75;\r\n\r\nconst PASS_TURN_DRAW_EFFECT = new ListEffect(\r\n    new ChangePlayerValue(resolveOpponent, 1, 'popularity'),\r\n    new DrawCardEffect(resolveOpponent, 1)\r\n)\r\n\r\nexport default class CardGame extends Game<CardGameState, CardGameMove>{\r\n\r\n    cardIndex:Record<number, Card>;\r\n    deckOne:number[];\r\n    deckTwo:number[];\r\n    static STARTING_HAND_SIZE: number = 6;\r\n\r\n    constructor(cardIndex:Record<number,Card>, deckOne?:number[], deckTwo?:number[]){\r\n        super();\r\n        this.cardIndex = cardIndex;\r\n        this.deckOne = deckOne ? deckOne : Object.keys(this.cardIndex).map(i=>parseFloat(i));\r\n        this.deckTwo = deckTwo ? deckTwo : this.deckOne;\r\n    }\r\n\r\n    applyMove(state: CardGameState, move: CardGameMove): CardGameState {\r\n        if(move.type === \"end\"){\r\n            return this.onTurnEnd(state);\r\n        }else if(move.type === \"play\"){\r\n            return this.applyCardPlay(state, move.cardNumber);\r\n        }else if(move.type === \"discard\"){\r\n            return this.applyCardDiscard(state, move.cardNumber)\r\n        }else if(move.type === \"choice\"){\r\n            return this.applyChoiceMove(state, move)\r\n        }\r\n        throw new Error(\"Unknown move\")\r\n    }\r\n\r\n    getSensibleMoves(state: CardGameState): CardGameChain[] {\r\n        if(state.roundsUntilElection === 1 && state.endRoundAfterThisTurn){\r\n            const votes = this.getVotes(state);\r\n            if(votes[state.activePlayer] > votes[(3-state.activePlayer) as 1|2]) return [{type:'end'}]\r\n        }\r\n        if(state.cardPlayedThisTurn) return [{type:'end'}]\r\n        return this.getCardMoves(state).filter((chain)=>{\r\n            const cardNumber = Array.isArray(chain) ? chain[0].cardNumber : chain.cardNumber;\r\n            if(!this.cardIndex[cardNumber]){\r\n               throw new Error(\"Can't find card \"+cardNumber)\r\n            }\r\n            const {effect} = (this.cardIndex[cardNumber] as EffectCard);\r\n            if(effect?.constructor.name !== \"ConditionalEffect\") {\r\n                return true;\r\n            }\r\n            const {condition} = (effect as ConditionalEffect)\r\n            const playerKey = state.activePlayer === 1 ? 'playerOne' : 'playerTwo';\r\n            return condition.resolveValue(state,{playerKey}, this)\r\n        })\r\n    }\r\n\r\n    getDemographicVote(state:CardGameState, pos:{x:number, y:number}):1|2|undefined{\r\n        const MARGIN = 0.002;\r\n\r\n        const bPop = state.playerOne.popularity;\r\n        const rPop = state.playerTwo.popularity;\r\n\r\n        const bdistSquared = Math.pow(state.playerOne.position.x - pos.x, 2) +  Math.pow(state.playerOne.position.y - pos.y, 2)\r\n        const rdistSquared = Math.pow(state.playerTwo.position.x - pos.x, 2) +  Math.pow(state.playerTwo.position.y - pos.y, 2)\r\n\r\n        const rScore =  rPop * POP_RANGE - rdistSquared;\r\n        const bScore =  bPop * POP_RANGE -  bdistSquared;\r\n\r\n        if(bScore - MARGIN > rScore && bScore > 0.0) return 1;\r\n        if(rScore - MARGIN > bScore && rScore > 0.0) return 2;\r\n        return undefined;\r\n    }\r\n\r\n    getVotes(state:CardGameState):{1:number, 2:number}{\r\n        const votes =  _.chain(state.demographics)\r\n            .map(pos=>this.getDemographicVote(state, pos))\r\n            .filter(_.identity)\r\n            .countBy()\r\n            .value() as {1:number, 2:number}\r\n        return {\r\n            1: votes[1]||0,\r\n            2: votes[2]||0\r\n        };\r\n    }\r\n\r\n    getStatus(state: CardGameState): GameStatus {\r\n        if(state.roundsUntilElection > 0) return GameStatus.IN_PLAY;\r\n        const votes = this.getVotes(state);\r\n        if(votes[1] > votes[2]) return GameStatus.WIN;\r\n        if(votes[1] < votes[2]) return GameStatus.LOSE;\r\n        return GameStatus.DRAW;\r\n    }\r\n\r\n    getValidMoves(state: CardGameState): (CardGameChain)[] {\r\n        if(state.cardBeingPlayed!==undefined){\r\n            const playerKey = state.activePlayer  === 1 ? 'playerOne' : 'playerTwo';\r\n            const card = this.cardIndex[state.cardBeingPlayed];\r\n            if(!ChoiceActionCard.is(card)) throw new Error(\"Not a choice card!\")\r\n            return card.choiceAction.getChoices(state, {playerKey}, this);\r\n        }\r\n        if(state.step === 'draw') return this.getDiscardMoves(state);\r\n        return [{type:\"end\"}, ...this.getCardMoves(state)]\r\n    }\r\n\r\n    newGame(): CardGameState {\r\n        const newPlayer = {\r\n            hand:[],\r\n            discardPile:[],\r\n            board:[],\r\n            capital: 3,\r\n            popularity: 22,\r\n        }\r\n        const preGame:CardGameState = {\r\n            activePlayer: 1,\r\n            roundsUntilElection: 4,\r\n            demographics: createStartingDemographics(),\r\n            endRoundAfterThisTurn: false,\r\n            cardPlayedThisTurn: false,\r\n            step: 'play',\r\n            isFirstTurn: true,\r\n            playerOne:{\r\n                ...newPlayer,\r\n                deck: this.deckOne,\r\n                position:{x:0.2, y:0},\r\n            },\r\n            playerTwo:{\r\n                ...newPlayer,\r\n                deck: this.deckTwo,\r\n                position:{x:-0.2, y:0},\r\n            }\r\n        };\r\n        const blueDrawCardsEffect = new DrawCardEffect(resolveActivePlayer, CardGame.STARTING_HAND_SIZE - 1);\r\n        const redDrawCardsEffect = new DrawCardEffect(resolveActivePlayer, CardGame.STARTING_HAND_SIZE);\r\n        const p1Draw =  blueDrawCardsEffect.applyEffect(preGame,{playerKey: \"playerOne\"}, this);\r\n        return redDrawCardsEffect.applyEffect(p1Draw,{playerKey: \"playerTwo\"}, this);\r\n    }\r\n\r\n    print( {playerOne, playerTwo, ...state}: CardGameState): void {\r\n        console.log(chalk.white(JSON.stringify(state,null,4)))\r\n        console.log(chalk.blue(JSON.stringify(playerOne,null,4)))\r\n        console.log(chalk.red(JSON.stringify(playerTwo,null,4)))\r\n    }\r\n\r\n    randomizeHiddenInfo(state: CardGameState): CardGameState {\r\n        const opponentKey = state.activePlayer === 1 ? 'playerTwo' : 'playerOne'\r\n\r\n        // Put their hand back into the deck, then draw up to the same number\r\n        const deck = [...state[opponentKey].deck, ...state[opponentKey].hand];\r\n        const hand = []\r\n        for(let i = 0; i < state[opponentKey].hand.length; i++){\r\n           const drawIndex = Math.floor(Math.random() * deck.length);\r\n            hand.push(...deck.splice(drawIndex, 1))\r\n        }\r\n\r\n        return {\r\n            ...state,\r\n            [opponentKey]:{\r\n                ...state[opponentKey],\r\n                hand,\r\n                deck\r\n            }\r\n        };\r\n    }\r\n\r\n     getCardMoves(state: CardGameState):(CardGamePlayCardMove|[CardGamePlayCardMove,CardGameChoiceMove])[] {\r\n        if(state.step != 'play') return [];\r\n        const playerKey = state.activePlayer === 1 ? 'playerOne' : 'playerTwo';\r\n        const activePlayer = state[playerKey];\r\n        return _.flatMap(activePlayer.hand, cardNumber=>{\r\n            const playMove:CardGamePlayCardMove = {type:\"play\", cardNumber};\r\n            const card = this.cardIndex[cardNumber];\r\n            if(ChoiceActionCard.is(card)){\r\n                const choices:CardGameChoiceMove[] =  card.choiceAction.getChoices(state, {playerKey} , this);\r\n                const chain = choices.map(choice => [playMove, choice] as [CardGamePlayCardMove,CardGameChoiceMove])\r\n                return chain as (CardGamePlayCardMove|[CardGamePlayCardMove,CardGameChoiceMove])[]\r\n            }\r\n            return [playMove];\r\n        })\r\n    }\r\n   private getDiscardMoves(state: CardGameState):CardGameDiscardCardMove[] {\r\n        if(state.step != 'draw') return [];\r\n        const activePlayer = state.activePlayer === 1 ? state.playerOne : state.playerTwo;\r\n        return activePlayer.hand.map(cardNumber=>({type:\"discard\", cardNumber}))\r\n    }\r\n\r\n    private onTurnEnd(state: CardGameState):CardGameState {\r\n        const activePlayer = state.activePlayer === 1 ? 2 : 1;\r\n        const playerKey = activePlayer  === 1 ? 'playerOne' : 'playerTwo';\r\n        const roundEnding = state.endRoundAfterThisTurn;\r\n        const afterRoundUpdateState =  roundEnding ? this.onRoundEnd(state) : state;\r\n        const shouldDraw = !roundEnding && !state.cardPlayedThisTurn && state[playerKey].popularity > 0;\r\n        const afterDraw = shouldDraw ? PASS_TURN_DRAW_EFFECT.applyEffectNoFizzle(afterRoundUpdateState, {playerKey}, this) : afterRoundUpdateState;\r\n        const afterTurnEndState:CardGameState =  {\r\n            ...afterDraw,\r\n            step: 'play',\r\n            cardPlayedThisTurn: false,\r\n            isFirstTurn: false,\r\n            endRoundAfterThisTurn: !state.cardPlayedThisTurn && !roundEnding,\r\n            activePlayer,\r\n        }\r\n        return this.processEvent(afterTurnEndState, 'turn_start',{player:playerKey})\r\n    }\r\n\r\n    private applyCardPlay(state: CardGameState, cardNumber: number):CardGameState {\r\n        const card = this.cardIndex[cardNumber];\r\n        return card.play(state, cardNumber, this)\r\n    }\r\n    private applyCardDiscard(state: CardGameState, cardNumber: number):CardGameState {\r\n        const playerKey = state.activePlayer  === 1 ? 'playerOne' : 'playerTwo';\r\n        const player = state[playerKey];\r\n\r\n        const hand = [...player.hand];\r\n        const discardPile = [...player.discardPile];\r\n        discardPile.push(...hand.splice(hand.indexOf(cardNumber), 1))\r\n        return {\r\n            ...state,\r\n            step: hand.length > CardGame.STARTING_HAND_SIZE ? 'draw' :'play',\r\n            [playerKey]:{\r\n                ...player,\r\n                hand,\r\n                discardPile\r\n            }\r\n        }\r\n    }\r\n\r\n    getHeuristic(state: CardGameState):number {\r\n        const votes = this.getVotes(state)\r\n        const bluePoints = votes[1] + 2 * state.playerOne.capital + 0.1 * state.playerOne.hand.length;\r\n        const redPoints = votes[2] + 2 * state.playerOne.capital + 0.1 * state.playerOne.hand.length;\r\n        if(bluePoints === redPoints) return 0;\r\n        return (bluePoints-redPoints)/(redPoints+bluePoints)\r\n    }\r\n\r\n\r\n    processEvent<E extends EventType>(baseState:CardGameState, eventType:E, eventParams: EventParams<E>):CardGameState{\r\n        if(this.getStatus(baseState) != GameStatus.IN_PLAY) return baseState\r\n\r\n        let state = baseState;\r\n        const playerKeys:PlayerKey[] = ['playerOne', 'playerTwo'];\r\n        playerKeys.forEach((playerKey:PlayerKey)=>{\r\n            const itemCardsInPlay = baseState[playerKey].board\r\n                .map(n=>this.cardIndex[n])\r\n                .filter(c=>ItemCard.isItemCard(c)) as ItemCard[]\r\n\r\n            const listeners = itemCardsInPlay\r\n                .map(c=>c.ability)\r\n                .filter(a=>OnEventAbility.isOnEventAbility(a, eventType)) as OnEventAbility<E>[]\r\n\r\n            listeners.forEach(listener=>{\r\n                try{\r\n                    state = listener.trigger(state, eventParams, {playerKey}, this);\r\n                }catch(e){\r\n                    if(!Fizzle.isFizzle(e)) throw e;\r\n                    state = e.returnState;\r\n                }\r\n            })\r\n        })\r\n\r\n        return state;\r\n    }\r\n\r\n    private applyChoiceMove(state: CardGameState, move: CardGameChoiceMove):CardGameState {\r\n        const playerKey = state.activePlayer  === 1 ? 'playerOne' : 'playerTwo';\r\n        const card = this.cardIndex[state.cardBeingPlayed!];\r\n        if(!ChoiceActionCard.is(card)) {\r\n            throw new Error(`${state.cardBeingPlayed} Not a choice card!`)\r\n        }\r\n        const stateAfterEffects = (()=>{\r\n            try{\r\n                return card.choiceAction.applyEffect(move, state, {playerKey}, this);\r\n            }catch(e){\r\n                if(!Fizzle.isFizzle(e))throw e;\r\n                return e.returnState;\r\n            }\r\n        })();\r\n        return {\r\n            ...stateAfterEffects,\r\n            step: 'play',\r\n            cardBeingPlayed: undefined\r\n        }\r\n    }\r\n\r\n    private onRoundEnd(state: CardGameState):CardGameState {\r\n        const afterEvents:CardGameState =  {\r\n            ...this.processEvent(state, 'round_end', {}),\r\n            roundsUntilElection: state.roundsUntilElection - 1,\r\n            endRoundAfterThisTurn: false,\r\n        };\r\n        if(afterEvents.roundsUntilElection === 0) return afterEvents;\r\n        const updatePlayer = (player:CardGamePlayerState) => ({\r\n            ...player,\r\n            capital: player.capital + 1,\r\n            hand: []\r\n        })\r\n        const newState:CardGameState = {\r\n            ...afterEvents,\r\n            playerOne: updatePlayer(afterEvents.playerOne),\r\n            playerTwo: updatePlayer(afterEvents.playerTwo),\r\n        }\r\n        const drawEffect = new DrawCardEffect(resolveActivePlayer, 6)\r\n        return drawEffect.applyEffectNoFizzle(drawEffect.applyEffectNoFizzle(newState, {playerKey:'playerTwo'}, this), {playerKey:'playerOne'}, this);\r\n    }\r\n\r\n    getActiveActionChoice(state:CardGameState): ChoiceAction|undefined{\r\n        if(state.cardBeingPlayed === undefined) return undefined;\r\n        const card = this.cardIndex[state.cardBeingPlayed];\r\n        if(!ChoiceActionCard.is(card)) throw new Error(\"Not a choice card!\")\r\n        return card.choiceAction\r\n    }\r\n}","import React, {CSSProperties, useEffect} from 'react'\r\n\r\nconst ARROW_STYLE:CSSProperties= {\r\n    boxSizing: 'border-box',\r\n    position:'absolute',\r\n    background: 'orange',\r\n    width: 14,\r\n    zIndex: 1,\r\n    left: 10,\r\n    top: 90,\r\n    marginBottom: 100,\r\n    transformOrigin:'top',\r\n    display: 'flex',\r\n    flexDirection: \"column-reverse\",\r\n    alignItems: \"center\",\r\n    cursor: 'none',\r\n    pointerEvents: 'none',\r\n}\r\n\r\nconst HEAD_STYLE:CSSProperties= {\r\n    position: 'relative',\r\n    top: 10,\r\n    borderLeft: '20px solid transparent',\r\n    borderRight: '20px solid transparent',\r\n    borderTop: '20px solid orange',\r\n    cursor: 'none',\r\n    pointerEvents: 'none',\r\n}\r\n\r\nconst XOFFSET = 20;\r\nconst YOFFSET = -45;\r\n\r\nconst ChoiceArrow:React.FunctionComponent = ()=>{\r\n    const [height, setHeight] = React.useState(100)\r\n    const [theta, setTheta] = React.useState(45)\r\n    const element = React.useRef<HTMLDivElement>(null);\r\n    const dynamicStyle:CSSProperties = {\r\n        height,\r\n        transform: `rotate(${theta}rad)`\r\n    }\r\n\r\n    useEffect(()=>{\r\n        const listener = (event:MouseEvent)=>{\r\n            if(!element.current) return;\r\n            const domRect = element.current.getBoundingClientRect();\r\n            const deltaX = event.clientX - domRect.x - XOFFSET;\r\n            const deltaY = event.clientY - domRect.y - YOFFSET;\r\n            const theta = Math.atan2(-deltaX, deltaY);\r\n            const height = Math.sqrt(deltaX*deltaX+deltaY*deltaY)\r\n\r\n            setTheta(theta)\r\n            setHeight(height)\r\n        };\r\n        window.addEventListener('mousemove',listener)\r\n        return ()=>window.removeEventListener('mousemove', listener)\r\n    },[element])\r\n    return <div  ref={element}>\r\n        <div style={{...ARROW_STYLE, ...dynamicStyle}}>\r\n            <div style={HEAD_STYLE}/>\r\n        </div>\r\n    </div>\r\n}\r\n\r\nexport default ChoiceArrow;","import React, {useState} from \"react\";\r\n\r\ntype ReactHoverDelayTriggerProps = React.PropsWithChildren< {\r\n    delay: number,\r\n    className?:string,\r\n    handleHoverTrigger: ()=>void,\r\n    handleHoverCancel: ()=>void,\r\n}>\r\nexport default function DelayHover(props:ReactHoverDelayTriggerProps):JSX.Element {\r\n    const [tId, setTId] = useState(0)\r\n    const [hovered, setHovered] = useState(false)\r\n    const {handleHoverCancel, className} = props;\r\n    React.useEffect(()=>{\r\n        //do Nothing\r\n        return ()=>handleHoverCancel();\r\n    },[]);\r\n    return <span\r\n        className={className}\r\n        style={{pointerEvents:'auto'}}\r\n        onMouseOver={()=>{\r\n            if(!hovered){\r\n                const i = window.setTimeout(()=>{\r\n                    props.handleHoverTrigger()\r\n                }, props.delay)\r\n                setHovered(true)\r\n                setTId(i);\r\n            }\r\n        }}\r\n         onMouseOut={()=>{\r\n            clearTimeout(tId)\r\n            setHovered(false)\r\n            props.handleHoverCancel()\r\n        }}\r\n    >\r\n        {props.children}\r\n    </span>\r\n}","import React, {CSSProperties, useEffect} from 'react';\r\nimport {Card, Icon} from \"../cardgame/Card\";\r\nimport _ from 'lodash';\r\n\r\nfunction importAll(r:any) {\r\n  const moduleArr =  r.keys().map((x:any)=>({\r\n      key: x.match(/[\\w-]*(?=\\.png)/)[0],\r\n      icon: r(x).default,\r\n  }));\r\n  return _.chain(moduleArr).keyBy('key').mapValues('icon').value();\r\n}\r\n\r\nconst icons = importAll((require as any).context('./assets/icons', false, /\\.(png)$/)) as Record<string, string>;\r\n\r\nexport type CardComponentProps = {\r\n    style?:CSSProperties,\r\n    card: Card,\r\n    onClick:()=>void;\r\n    isHidden:boolean,\r\n}\r\n\r\nconst CARD_STYLE:CSSProperties = {\r\n    boxSizing: 'border-box',\r\n    display: 'inline-flex',\r\n    backfaceVisibility: \"hidden\",\r\n    border: '8px solid black',\r\n    borderRadius: 20,\r\n    fontFamily: \"'Open Sans', sans-serif\",\r\n    fontSize: 11,\r\n    padding: 8,\r\n    width: 260,\r\n    height: 400,\r\n    zIndex: 0,\r\n    transition: 'transform 0.3s',\r\n    overflow: 'hidden',\r\n    color: 'white',\r\n    background: 'linear-gradient(0deg, rgba(53,62,62,1) 0%, rgba(34,34,34,1) 100%)'\r\n};\r\nconst OUTLINE_WRAPPER_STYLE:CSSProperties = {\r\n    border: '4px solid',\r\n    padding: 12,\r\n    display: 'inline-flex',\r\n    flexDirection: 'column',\r\n    borderRadius: 16,\r\n    flexGrow: 1,\r\n};\r\nconst BACKGROUND_ICONS_STYLE:CSSProperties = {\r\n    position: 'absolute',\r\n    top: '-50%',\r\n    left: '-50%',\r\n    width: '200%',\r\n    height: '200%',\r\n    backgroundSize: '40px 40px',\r\n    backgroundRepeat: 'repeat',\r\n    opacity: 0.05,\r\n    transform: 'rotate(-30deg)',\r\n    transformOrigin: 'center center',\r\n}\r\nconst BACKFACE_STYLE:CSSProperties = {\r\n    boxSizing: 'border-box',\r\n    position: \"absolute\",\r\n    top: 0,\r\n    left: 0,\r\n    backgroundColor: 'lightgray',\r\n    border: '8px solid black',\r\n    borderRadius: 20,\r\n    width: 260,\r\n    height: 400,\r\n    zIndex: -1,\r\n    transition: 'transform 0.3s',\r\n}\r\nconst CARD_TITLE_STYLE:CSSProperties ={\r\n    fontWeight: 'bold',\r\n    fontFamily: 'Indie Flower',\r\n    lineHeight: 1,\r\n    height: 45,\r\n    padding: 5,\r\n    overflow: 'hidden',\r\n    fontSize: 22,\r\n    textAlign: 'center',\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    justifyContent: 'space-around',\r\n}\r\nconst CARD_COST_STYLE:CSSProperties = {\r\n    ...CARD_TITLE_STYLE,\r\n    fontSize: 18,\r\n    height: 10\r\n}\r\nconst CARD_TEXT_STYLE:CSSProperties = {\r\n    flexGrow: 1,\r\n    fontSize: 24,\r\n    padding: 5,\r\n    overflow: 'hidden',\r\n    display: 'flex',\r\n    textAlign: 'left',\r\n}\r\n\r\nconst VERTICAL_CENTER_STYLE:CSSProperties = {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    justifyContent: 'space-around',\r\n}\r\n\r\nconst HIDDEN_STYLE = {\r\n    transform: 'rotate3d(0,1,0,180deg)'\r\n}\r\n\r\n\r\n\r\nfunction VerticalCenter(props:React.PropsWithChildren<{}>){\r\n    return <div style={VERTICAL_CENTER_STYLE}>\r\n        <div>\r\n         {props.children}\r\n        </div>\r\n    </div>\r\n}\r\n\r\nexport type HSV = [number, number, number];\r\n\r\nfunction IconComponent(props:{icon:Icon, hsv:HSV}){\r\n    const {icon,hsv} = props;\r\n    const iconName = typeof icon === 'string' ? icon : icon.icon;\r\n    return <div style={{textAlign: 'center'}}>\r\n        <img src={icons[iconName]} width=\"120px\" height=\"120px\"/>\r\n    </div>\r\n}\r\n\r\nfunction TextFillSpace(props:React.PropsWithChildren<{style:CSSProperties}>){\r\n    const ref = React.useRef<HTMLDivElement>(null);\r\n    const [fontSize, setFontSize] = React.useState(props.style.fontSize);\r\n    useEffect(()=>{\r\n        if(!ref.current) return;\r\n        let size = fontSize as number;\r\n        for(let i = 0; i < 100 && (ref.current.clientHeight < ref.current.scrollHeight ||ref.current.clientWidth < ref.current.scrollWidth) ; i++){\r\n            size -= 0.1;\r\n            ref.current.style.fontSize = `${size}px`;\r\n        }\r\n        if(fontSize!=size){\r\n            ref.current.style.fontSize = `${size}px`;\r\n            setFontSize(size);\r\n        }\r\n    },[ref.current, ref]);\r\n\r\n    return <div style={{...props.style, fontSize}} ref={ref}>\r\n        {props.children}\r\n    </div>\r\n}\r\n\r\nconst CardComponent = (props:CardComponentProps) => {\r\n    const rotationStyle = {...(props.isHidden ? HIDDEN_STYLE : {})};\r\n    const icon = React.useMemo(()=>props.card.getIcon(), [props.card]);\r\n    const iconName = typeof icon === 'string' ? icon : icon.icon;\r\n    const backgroundImage = `url(${icons[iconName]})`;\r\n    const hsv:HSV = [180, 70, 50];\r\n    const filter = `brightness(60%) sepia(100%) saturate(300%) hue-rotate(-35deg)`;\r\n    return <div style={{position:'relative', overflow:'hidden', ...props.style}} onClick={props.onClick}>\r\n        <div style={{...rotationStyle, ...CARD_STYLE, }}>\r\n           <div style={{...BACKGROUND_ICONS_STYLE, backgroundImage}}/>\r\n           <div style={OUTLINE_WRAPPER_STYLE}>\r\n               {props.card.cost !== 0 && <div style={CARD_COST_STYLE}>\r\n                   {Array(props.card.cost + 1).join('🟆')}\r\n               </div>}\r\n                <TextFillSpace style={CARD_TITLE_STYLE}>\r\n                    <div>\r\n                        {props.card.getName()}\r\n                    </div>\r\n                </TextFillSpace>\r\n            <VerticalCenter>\r\n                    <IconComponent icon={icon} hsv={hsv}/>\r\n            </VerticalCenter>\r\n            <TextFillSpace style={CARD_TEXT_STYLE}>\r\n                <VerticalCenter>\r\n                    {props.card.getText()}\r\n                </VerticalCenter>\r\n            </TextFillSpace>\r\n           </div>\r\n        </div>\r\n        <div style={{...BACKFACE_STYLE, ...rotationStyle}}/>\r\n    </div>\r\n}\r\n\r\nexport default CardComponent;","import React, {CSSProperties, FunctionComponent} from \"react\";\r\nimport {Card, ChoiceActionCard} from \"../cardgame/Card\";\r\nimport ChoiceArrow from \"./ChoiceArrow\";\r\nimport ReactHoverDelayTrigger from 'react-hover-delay-trigger'\r\nimport CardGame, {CardGameMove, CardGameState} from \"../cardgame/CardGame\";\r\nimport DelayHover from \"./DelayHover\";\r\nimport {ChooseOne} from \"../cardgame/Components/ChoiceActions/ChooseOne\";\r\nimport CardComponent from \"./CardComponent\";\r\n\r\ntype CardProps = {\r\n    card:Card,\r\n    onClick:()=>void,\r\n    setPreview:(move?:CardGameMove)=>void,\r\n    gamestate:CardGameState;\r\n    game:CardGame;\r\n    isOpponent:boolean;\r\n    beingPlayed:boolean;\r\n    canBeDiscarded:boolean;\r\n    canBePlayed:boolean;\r\n    isHidden:boolean;\r\n    onBoard:boolean;\r\n}\r\n\r\nconst BEING_PLAYED_CARD_STYLE:CSSProperties = {\r\n    color: 'blue',\r\n    borderColor: 'black',\r\n    transform: \"scale(1.3)\",\r\n    zIndex: 2,\r\n    cursor: 'pointer',\r\n    opacity: 0.5,\r\n    margin: '0 70px',\r\n    pointerEvents: 'none',\r\n    transition: 'margin 0.3s, opacity 0.3s ease-in 1s'\r\n}\r\nconst CAN_BE_DISCADED_STYLE = {\r\n    borderColor: 'red',\r\n    borderWidth: 3,\r\n    cursor: 'pointer'\r\n}\r\nconst CAN_BE_PLAYED_STYLE = {\r\n    borderColor: 'blue',\r\n    borderWidth: 3,\r\n    cursor: 'pointer',\r\n}\r\n\r\nconst MOVE_DOWN_STYLE = {\r\n    top: 460,\r\n}\r\nconst MOVE_UP_STYLE = {\r\n    top: -460,\r\n}\r\n\r\n\r\nconst VANISHED_STYLE = {\r\n    transform: 'scale(0)'\r\n}\r\n\r\nconst CHOICE_BUBBLE_STYLE = {\r\n    display: 'inline-block',\r\n    margin: 5,\r\n    background: 'rgba(255, 128, 0, 0.5)',\r\n    padding: 20,\r\n    borderRadius: 15\r\n}\r\n\r\nconst WRAPPER_STYLE:CSSProperties = {\r\n    position: \"relative\",\r\n     transition: 'transform 0.3s, margin 0.35s ease-in 0.3s, top 0.4s ease-in-out 0.5s',\r\n   display:'inline-block',\r\n    top:0,\r\n    zIndex: 1,\r\n}\r\n\r\nconst CardWrapper:FunctionComponent<CardProps> = (props)=> {\r\n    const [hasAppearedOnBoard, setHasAppearedOnBoard] = React.useState(props.onBoard && !props.beingPlayed)\r\n    React.useEffect(() => {\r\n        if (props.onBoard && props.beingPlayed) {\r\n            const n = setTimeout(() => {\r\n                setHasAppearedOnBoard(true)\r\n            }, 800)\r\n            return () => window.clearTimeout(n)\r\n        } else if (props.onBoard && !props.beingPlayed) {\r\n            const n = setTimeout(() => {\r\n                setHasAppearedOnBoard(false)\r\n            }, 800)\r\n            return () => window.clearTimeout(n)\r\n        }\r\n    })\r\n\r\n    const {card, beingPlayed} = props;\r\n    const situationalStyle = props.canBeDiscarded ? CAN_BE_DISCADED_STYLE :\r\n        props.canBePlayed ? CAN_BE_PLAYED_STYLE :\r\n            hasAppearedOnBoard ? VANISHED_STYLE :\r\n                {};\r\n    const positionStyling = (props.beingPlayed && props.isOpponent) ? MOVE_DOWN_STYLE :\r\n        (props.beingPlayed && !props.isOpponent) ? MOVE_UP_STYLE :\r\n            {};\r\n    const onClick = props.canBeDiscarded || props.canBePlayed ? props.onClick : () => {};\r\n\r\n    const activeChoice = props.game.getActiveActionChoice(props.gamestate) as ChooseOne|undefined;\r\n    const chooseOneActive = activeChoice?.constructor === ChooseOne;\r\n    const choiceTexts:string[] = activeChoice && activeChoice.constructor === ChooseOne ? [activeChoice.aText, activeChoice.bText] : []\r\n\r\n    return <DelayHover\r\n            delay={400}\r\n            handleHoverTrigger={()=>{\r\n                if(props.canBePlayed){\r\n                    props.setPreview({type:'play', cardNumber:props.card.cardNumber})\r\n                }\r\n            }}\r\n            handleHoverCancel={()=>{\r\n                props.setPreview()\r\n            }}\r\n          >\r\n        <div style={{...WRAPPER_STYLE, ...positionStyling}}>\r\n            {<div style={{\r\n                position: 'absolute',\r\n                top:-200,\r\n                left: -150,\r\n                width: 300,\r\n                transition:'opacity 0.4s',\r\n                opacity: props.beingPlayed && chooseOneActive ? 1 : 0,\r\n            }}>\r\n                {[1,2].map(i=>\r\n                    <div style={CHOICE_BUBBLE_STYLE} className={'glow'}>\r\n                        {choiceTexts[i-1]}\r\n                    </div>\r\n                )}\r\n            </div>}\r\n        <CardComponent style={{...beingPlayed ? BEING_PLAYED_CARD_STYLE : {}, ...situationalStyle}} onClick={onClick} card={card} isHidden={props.isHidden}/>\r\n        {props.beingPlayed && ChoiceActionCard.is(card) && !props.isOpponent && <ChoiceArrow/>}\r\n    </div>\r\n        </DelayHover>\r\n}\r\n\r\nexport default CardWrapper;","export default __webpack_public_path__ + \"static/media/bg.e49eda7f.png\";","import React, {useEffect, useState} from \"react\";\r\ntype GetComponentProps<T> = T extends React.ComponentType<infer P> | React.Component<infer P> ? P : never\r\n\r\ntype KeysMatching<T, V> = {[K in keyof T]-?: T[K] extends V ? K : never}[keyof T];\r\ntype TransitionPropsProps<X extends Record<string, unknown>> = {\r\n    component: (props:X)=>JSX.Element,\r\n    propList:KeysMatching<X, number>[]\r\n} & X\r\n\r\nfunction TransitionProps<X extends Record<string, unknown>>({\r\n            component,\r\n           propList,\r\n           ...rest\r\n}:TransitionPropsProps<X>):JSX.Element {\r\n  const [visibleProps, setVisibleProps] = useState(rest);\r\n\r\n  useEffect(() => {\r\n    setTimeout(() => {\r\n      const newVisibleProps:any = {};\r\n      let requiresUpdate = false;\r\n      for (let key of propList) {\r\n        const currentValue = visibleProps[key as string] as number;\r\n        const targetValue = rest[key as string] as number;\r\n        const diff = targetValue - currentValue\r\n          if(Math.abs(diff)>0.005){\r\n              requiresUpdate=true;\r\n          }\r\n        const newValue = currentValue + diff/4;\r\n        newVisibleProps[key] = newValue;\r\n      }\r\n      if(requiresUpdate) setVisibleProps(newVisibleProps);\r\n    },60);\r\n  }, [rest, visibleProps]);\r\n\r\n  return component({...rest as any, ...visibleProps});\r\n};\r\n\r\nexport default TransitionProps;","import {Card} from \"../cardgame/Card\";\r\nimport React, {CSSProperties} from \"react\";\r\nimport { usePopperTooltip } from \"react-popper-tooltip\";\r\nimport \"react-popper-tooltip/dist/styles.css\";\r\nimport bg from './assets/bg.png'\r\nimport CardGame, {CardGameChoiceMove, CardGameMove, CardGameState, POP_RANGE} from \"../cardgame/CardGame\";\r\nimport { Shaders, Node, GLSL } from \"gl-react\";\r\nimport { Surface } from \"gl-react-dom\";\r\nimport TransitionProps from \"./TransitionProps\";\r\nimport {ChooseAPlayer} from \"../cardgame/Components/ChoiceActions/ChooseAPlayer\";\r\nimport {EXTREMES} from \"../cardgame/Components/Effects/MoveDemographicEffect\";\r\nimport {ChooseAnExtreme, ID_BY_EXTREME} from \"../cardgame/Components/ChoiceActions/ChooseAnExtreme\";\r\nimport DelayHover from \"./DelayHover\";\r\n\r\ntype DemographicDisplayProps = {\r\n    gamestate: CardGameState,\r\n    game: CardGame,\r\n    onChoiceClick: (move:CardGameChoiceMove)=>void,\r\n    setPreview: (move?:CardGameMove)=>void;\r\n    previewState?: CardGameState;\r\n}\r\n\r\nconst COMPASS_STYLE:CSSProperties = {\r\n    height: 500,\r\n    width: 500,\r\n    border: '1px solid black',\r\n    position: 'relative',\r\n    margin: 10,\r\n    overflow: 'hidden',\r\n    marginBottom: 160,\r\n}\r\nconst PLAYER_STYLE:CSSProperties = {\r\n    width: 30,\r\n    height: 30,\r\n    borderRadius: '100%',\r\n    border: '1px solid black',\r\n    position: 'absolute',\r\n    top: -15,\r\n    left: -15,\r\n    transition: 'background 0.3s, transform 0.3s'\r\n}\r\nconst DEMOGRAPHIC_STYLE:CSSProperties = {\r\n    width: 10,\r\n    height: 10,\r\n    borderRadius: '20%',\r\n    border: '1px solid black',\r\n    position: 'absolute',\r\n    top: -5,\r\n    left: -5,\r\n    transition: 'background 0.3s, transform 0.3s',\r\n    pointerEvents:'none',\r\n}\r\n\r\nconst VOTES_BAR_STYLE:CSSProperties = {\r\n    border: '1px solid black',\r\n    height: 25,\r\n    overflow: 'hidden',\r\n    color: 'white'\r\n}\r\n\r\nfunction coordsToTransform({x,y}:{x:number, y:number}){\r\n    return `translate(${(x+1)*250}px,${(y+1)*250 }px)`;\r\n}\r\n\r\nconst shaders = Shaders.create({\r\n  helloBlue: {\r\n    frag: GLSL`\r\nprecision highp float;\r\nvarying vec2 uv;\r\nuniform float bluePop;\r\nuniform float blueX;\r\nuniform float blueY;\r\nuniform float redPop;\r\nuniform float redX;\r\nuniform float redY;\r\nuniform float pbluePop;\r\nuniform float pblueX;\r\nuniform float pblueY;\r\nuniform float predPop;\r\nuniform float predX;\r\nuniform float predY;\r\nfloat distSquared( vec2 A, vec2 B )\r\n{\r\n    vec2 C = A - B;\r\n    return dot( C, C );\r\n}\r\n\r\nvoid main() {\r\n  vec2 bluePos = vec2(blueX, 1.0-blueY);\r\n  vec2 redPos = vec2(redX, 1.0-redY);\r\n  vec2 pBluePos = vec2(pblueX, 1.0-pblueY);\r\n  vec2 pRedPos = vec2(predX, 1.0-predY);\r\n  \r\n  float blueScore = bluePop - distSquared(bluePos, uv);\r\n  float redScore = redPop- distSquared(redPos, uv);\r\n  float pBlueScore = pbluePop - distSquared(pBluePos, uv);\r\n  float pRedScore = predPop - distSquared(pRedPos, uv);\r\n  \r\n  bool blueWins = blueScore > 0.0 && blueScore > redScore ;\r\n  bool redWins = redScore > 0.0 && blueScore < redScore ;\r\n  bool pBlueWins = pBlueScore > 0.0 && pBlueScore > pRedScore;\r\n  bool pRedWins = pRedScore > 0.0 && pBlueScore < redScore ;\r\n  \r\n  bool noWins = !blueWins && !redWins && !pBlueWins && !pRedWins;\r\n  \r\n  vec3 redColor = vec3(0.8,0.1,0.1);\r\n  vec3 blueColor = vec3(0.15,0.15,0.8);\r\n  vec3 grayColor = vec3(.7,0.7,0.7);\r\n  \r\n  vec3 col = (redWins||pRedWins) && !pBlueWins ? redColor :\r\n           (blueWins||pBlueWins) && !pRedWins  ? blueColor :\r\n           grayColor;\r\n    \r\n  vec3 gains = (!redWins && pRedWins) || (!blueWins && pBlueWins) ? vec3(0.2) : vec3(0);\r\n vec3 losses = (redWins && !pRedWins) || (blueWins && !pBlueWins) ? vec3(0.2) : vec3(0);\r\n  \r\n  gl_FragColor = vec4(col + gains - losses , 1.0);\r\n}`\r\n  }\r\n});\r\n\r\ntype BackgroundProps = {\r\n    blueX: number,\r\n    blueY:number,\r\n    bluePop:number,\r\n    redX:number,\r\n    redY:number,\r\n    redPop:number,\r\n    pblueX: number,\r\n    pblueY:number,\r\n    pbluePop:number,\r\n    predX:number,\r\n    predY:number,\r\n    predPop:number,\r\n}\r\n\r\nconst Background = (props:BackgroundProps) => {\r\n    const { blueX, redPop, redX, bluePop, blueY, redY,\r\n    pblueX, predPop, predX, pbluePop, pblueY, predY} = props;\r\n    const coef = POP_RANGE * 0.25;\r\n    return <>\r\n        <img src={bg} style={{position:'absolute'}}/>\r\n        <Surface width={500} height={500} style={{mixBlendMode:'multiply'}}>\r\n        <Node shader={shaders.helloBlue} uniforms={{\r\n            blueX:blueX/2 + 0.5,\r\n            blueY:blueY/2 + 0.5,\r\n            bluePop:bluePop*coef,\r\n            redX:redX/2 + 0.5,\r\n            redY:redY/2 + 0.5,\r\n            redPop:redPop*coef,\r\n            pblueX:pblueX/2 + 0.5,\r\n            pblueY:pblueY/2 + 0.5,\r\n            pbluePop:pbluePop*coef,\r\n            predX:predX/2 + 0.5,\r\n            predY:predY/2 + 0.5,\r\n            predPop:predPop*coef,\r\n        }} />\r\n    </Surface>\r\n    </>\r\n  }\r\n\r\nclass AnimatedBackground extends React.Component<BackgroundProps> {\r\n  render() {\r\n   return  <TransitionProps\r\n       component={Background}\r\n       propList={['blueX', 'blueY', 'bluePop', 'redX', 'redY', 'redPop', 'pblueX', 'pblueY', 'pbluePop', 'predX', 'predY', 'predPop']}\r\n       blueX={this.props.blueX}\r\n       blueY={this.props.blueY}\r\n       bluePop={this.props.bluePop}\r\n       redX={this.props.redX}\r\n       redY={this.props.redY}\r\n       redPop={this.props.redPop}\r\n       pblueX={this.props.pblueX}\r\n       pblueY={this.props.pblueY}\r\n       pbluePop={this.props.pbluePop}\r\n       predX={this.props.predX}\r\n       predY={this.props.predY}\r\n       predPop={this.props.predPop}\r\n   />\r\n  }\r\n}\r\n\r\ntype VoteBarsProps = {\r\n    redVotes: number,\r\n    blueVotes:number,\r\n    style?:CSSProperties,\r\n}\r\nconst VoteBars = ({redVotes, blueVotes, style}:VoteBarsProps)=>\r\n    <div style={{display: 'flex', width: 200, ...style}}>\r\n        <div style={{flexGrow:blueVotes, background:'blue', ...VOTES_BAR_STYLE}}>{Math.round(blueVotes)}</div>\r\n        <div style={{flexGrow:redVotes, background:'red', ...VOTES_BAR_STYLE}}>{Math.round(redVotes)}</div>\r\n    </div>\r\n\r\nconst DemographicDisplay:React.FunctionComponent<DemographicDisplayProps> = props=>{\r\n    const {gamestate:{playerOne, playerTwo},previewState, onChoiceClick, game} = props;\r\n    const votes = props.game.getVotes(props.gamestate);\r\n    const previewVotes = previewState ? props.game.getVotes(previewState) : votes;\r\n    const isChoosingPlayer = game.getActiveActionChoice(props.gamestate)?.constructor === ChooseAPlayer;\r\n    const isChoosingExtreme = game.getActiveActionChoice(props.gamestate)?.constructor === ChooseAnExtreme;\r\n\r\n    const bluePlayer =\r\n            <DelayHover\r\n                delay={400}\r\n                handleHoverTrigger={()=>{\r\n                    if(isChoosingPlayer){\r\n                        props.setPreview({type:'choice', choice:1})\r\n                    }\r\n                }}\r\n                handleHoverCancel={()=>{\r\n                    props.setPreview()\r\n                }}\r\n              >\r\n                <div\r\n                    className={isChoosingPlayer ? 'glow' : ''}\r\n                    style={{...PLAYER_STYLE, background:'blue', transform:coordsToTransform(props.gamestate.playerOne.position)}}\r\n                    onClick={()=>isChoosingPlayer && onChoiceClick({type:'choice', choice:1})}\r\n                />\r\n            </DelayHover>\r\n    const redPlayer =\r\n            <DelayHover\r\n                delay={400}\r\n                handleHoverTrigger={()=>{\r\n                    if(isChoosingPlayer){\r\n                        props.setPreview({type:'choice', choice:2})\r\n                    }\r\n                }}\r\n                handleHoverCancel={()=>{\r\n                    props.setPreview()\r\n                }}\r\n              >\r\n                <div\r\n                    className={isChoosingPlayer ? 'glow' : ''}\r\n                    style={{...PLAYER_STYLE, background:'red', transform:coordsToTransform(props.gamestate.playerTwo.position)}}\r\n                    onClick={()=>isChoosingPlayer && onChoiceClick({type:'choice', choice:2})}\r\n                />\r\n            </DelayHover>\r\n\r\n    return <div style={{display:'flex', justifyContent:'space-evenly'}}>\r\n            <div style={COMPASS_STYLE}>\r\n            <AnimatedBackground\r\n                bluePop={playerOne.popularity}\r\n                blueX={playerOne.position.x}\r\n                blueY={playerOne.position.y}\r\n                redPop={playerTwo.popularity}\r\n                redX={playerTwo.position.x}\r\n                redY={playerTwo.position.y}\r\n                pbluePop={props.previewState ? props.previewState.playerOne.popularity : playerOne.popularity}\r\n                pblueX={props.previewState ? props.previewState.playerOne.position.x : playerOne.position.x}\r\n                pblueY={props.previewState ? props.previewState.playerOne.position.y : playerOne.position.y}\r\n                predPop={props.previewState ? props.previewState.playerTwo.popularity : playerTwo.popularity}\r\n                predX={props.previewState ? props.previewState.playerTwo.position.x : playerTwo.position.x}\r\n                predY={props.previewState ? props.previewState.playerTwo.position.y : playerTwo.position.y}\r\n            />\r\n                {bluePlayer}\r\n                {redPlayer}\r\n            {(['playerOne', 'playerTwo'] as ('playerOne'|'playerTwo')[]).map((playerKey)=><div\r\n                style={{...PLAYER_STYLE,\r\n                    borderColor:'white',\r\n                    pointerEvents: 'none',\r\n                    opacity: (props.previewState &&\r\n                        (props.previewState[playerKey].position.x != props.gamestate[playerKey].position.x || props.previewState[playerKey].position.y != props.gamestate[playerKey].position.y)) ?\r\n                        1 : 0,\r\n                    transform:props.previewState ? coordsToTransform(props.previewState[playerKey].position) : coordsToTransform(props.gamestate[playerKey].position)\r\n                }}\r\n            />)}\r\n            {props.gamestate.demographics.map(({x,y}, i)=>{\r\n                const vote = props.game.getDemographicVote(props.gamestate, {x,y})\r\n                const background = vote === 1 ? 'blue' :\r\n                                    vote ===2 ? 'red' :\r\n                                        'gray';\r\n                const positionStyling:CSSProperties = {\r\n                    transform: coordsToTransform({x,y}),\r\n                    background\r\n                }\r\n                const preview = props.previewState?.demographics[i];\r\n                const ghostStyling:CSSProperties = {\r\n                    transform: preview ? coordsToTransform(preview) : positionStyling.transform,\r\n                    opacity: preview && (preview.x !== x || preview.y !== y) ? .5 : 0,\r\n                    borderColor:'white',\r\n                    background\r\n                }\r\n                return <>\r\n                     <div style={{...DEMOGRAPHIC_STYLE, ...positionStyling}} key={i}/>\r\n                    <div style={{...DEMOGRAPHIC_STYLE,  ...ghostStyling}} key={`${i}_preview`}/>\r\n                </>\r\n            })}\r\n            {isChoosingExtreme && Object.entries(EXTREMES).map(([extreme, point])=>\r\n                 <DelayHover\r\n                delay={400}\r\n                handleHoverTrigger={()=>{\r\n                    props.setPreview({type:'choice', choice:ID_BY_EXTREME[extreme]})\r\n                }}\r\n                handleHoverCancel={()=>{\r\n                    props.setPreview()\r\n                }}\r\n              >\r\n                <div\r\n                    className={'glow'}\r\n                    onClick={()=>onChoiceClick({type:'choice', choice:ID_BY_EXTREME[extreme]})}\r\n                    style={{\r\n                        position: \"absolute\",\r\n                        backgroundColor: 'rgba(255, 128, 0, 0.5)',\r\n                        top: -75,\r\n                        left: -75,\r\n                        width: 150,\r\n                        height: 150,\r\n                        borderRadius: 500,\r\n                        transform:coordsToTransform(point)\r\n                    }}\r\n                />\r\n                 </DelayHover>\r\n            )}\r\n        </div>\r\n            <div style={{textAlign:'center'}}>\r\n                Election in\r\n                <div style={{fontSize:'150%', fontWeight:'bold'}}>\r\n                    {props.gamestate.roundsUntilElection}\r\n                </div>\r\n                Rounds\r\n                <div>\r\n                    {props.gamestate.cardPlayedThisTurn ? 'Card has been Played this turn' : '-'}\r\n                </div>\r\n                <div>\r\n                    {props.gamestate.endRoundAfterThisTurn ? 'Round will end if turn ended now' : '-'}\r\n                </div>\r\n                <TransitionProps\r\n                    component={VoteBars}\r\n                    propList={['blueVotes', 'redVotes']}\r\n                    blueVotes={votes[1]||0}\r\n                    redVotes={votes[2]||0}\r\n                />\r\n                <TransitionProps\r\n                    style={{\r\n                        opacity: previewState ? .4 : 0,\r\n                        transition: 'opacity 0.4s'\r\n                    }}\r\n                    component={VoteBars}\r\n                    propList={['blueVotes', 'redVotes']}\r\n                    blueVotes={previewVotes[1]||0}\r\n                    redVotes={previewVotes[2]||0}\r\n                />\r\n            </div>\r\n    </div>\r\n};\r\n\r\nexport default DemographicDisplay;","import {Card} from \"../cardgame/Card\";\r\nimport React, {CSSProperties} from \"react\";\r\nimport { usePopperTooltip } from \"react-popper-tooltip\";\r\nimport \"react-popper-tooltip/dist/styles.css\";\r\n\r\ntype CardPileProps = {\r\n    label: string,\r\n    cards:(Card|'?')[],\r\n}\r\n\r\nconst PILE_STYLE:CSSProperties = {\r\n    border: '1px solid black',\r\n    fontSize: 10,\r\n    borderRadius: 3,\r\n    width: 40,\r\n    height: 60,\r\n    margin: 5,\r\n    display: 'inline-block'\r\n}\r\nconst CARD_LIST_STYLE:CSSProperties = {\r\n    maxHeight: 200,\r\n    fontSize: 10,\r\n    textAlign: 'left',\r\n    width: 150,\r\n    overflowY: 'auto'\r\n}\r\n\r\nconst CardPile:React.FunctionComponent<CardPileProps> = props=>{\r\n    const {\r\n        label,\r\n        cards\r\n    } = props;\r\n        const {\r\n    getArrowProps,\r\n    getTooltipProps,\r\n    setTooltipRef,\r\n    setTriggerRef,\r\n    visible\r\n  } = usePopperTooltip({ interactive: true, delayHide: 100 });\r\n\r\n    return <>\r\n            <div style={PILE_STYLE} ref={setTriggerRef}>\r\n                {label}\r\n                <div>{cards.length}</div>\r\n            </div>\r\n         {visible && (\r\n          <div\r\n            ref={setTooltipRef}\r\n            {...getTooltipProps({ className: \"tooltip-container\" })}\r\n          >\r\n              {cards.length===0 && <i>Empty</i>}\r\n              <ul style={CARD_LIST_STYLE}>\r\n                  {cards.map((card, i)=><li key={i}>\r\n                      <b>{typeof card === 'string' ? card : card.getName()}</b>\r\n                      {' '}\r\n                        {typeof card !== 'string' && card.getText()}\r\n                  </li>)}\r\n              </ul>\r\n            <div {...getArrowProps({ className: \"tooltip-arrow\" })} />\r\n          </div>\r\n        )}\r\n        </>\r\n}\r\n\r\nexport default CardPile;","import CardWrapper from \"./CardWrapper\";\r\nimport FlipMove from \"react-flip-move\";\r\nimport React from \"react\";\r\nimport CardGame, {CardGameMove, CardGamePlayerState, CardGameState} from \"../cardgame/CardGame\";\r\nimport DelayHover from \"./DelayHover\";\r\n\r\nconst HAND_STYLE = {\r\n    display: 'inline-flex',\r\n    width: 1000,\r\n    justifyContent:'center',\r\n    zIndex: 2,\r\n}\r\n\r\ntype PlayerHandProps = {\r\n        game:CardGame,\r\n        displayHand:number[],\r\n        gamestate:CardGameState,\r\n        onCardClick:(cardNumber:number)=>void,\r\n        setPreview:(move?:CardGameMove)=>void,\r\n        isOpponent:boolean,\r\n        isActive:boolean,\r\n        player:CardGamePlayerState,\r\n        cardsBeingPlayed:number[],\r\n}\r\n\r\nfunction getTransform(i:number, outOf:number, reverse:boolean):string {\r\n    const r = i/(outOf-1);\r\n    const deg = (4*(1-r) - 4*r) * (reverse ? -1 : 1);\r\n    return `scale(0.6) rotate(${deg}deg)`\r\n}\r\n\r\nfunction PlayerHand(props:PlayerHandProps){\r\n    const {\r\n        game,\r\n        displayHand,\r\n        gamestate,\r\n        onCardClick,\r\n        setPreview,\r\n        isOpponent,\r\n        isActive,\r\n        player,\r\n        cardsBeingPlayed\r\n    } = props;\r\n    return <FlipMove style={{...HAND_STYLE}}>\r\n                {displayHand.map((n:number, i)=><div\r\n                    key={n+' '+game.cardIndex[n].getName()}\r\n                    style={{position: 'relative'} }\r\n                    className=\"zoom-focus\"\r\n                >\r\n                    <CardWrapper\r\n                        gamestate={gamestate}\r\n                        game={game}\r\n                        onClick={()=>onCardClick(n)}\r\n                        setPreview={setPreview}\r\n                        isOpponent={isOpponent}\r\n                        isHidden={isOpponent && !cardsBeingPlayed.includes(n)}\r\n                        card={game.cardIndex[n]}\r\n                        canBePlayed={isActive && !isOpponent && gamestate.step === 'play' && !cardsBeingPlayed.includes(n)}\r\n                        canBeDiscarded={isActive && !isOpponent && gamestate.step === 'draw' && !cardsBeingPlayed.includes(n)}\r\n                        beingPlayed={cardsBeingPlayed.includes(n)}\r\n                        onBoard={player.board.includes(n)}\r\n                    />\r\n                </div>)}\r\n            </FlipMove>\r\n}\r\n\r\nexport default PlayerHand;","import CardGame, {CardGameChoiceMove, CardGameMove, CardGamePlayerState, CardGameState} from \"../cardgame/CardGame\";\r\nimport React, {CSSProperties, FunctionComponent, useEffect} from \"react\";\r\nimport CardWrapper  from \"./CardWrapper\";\r\nimport DemographicDisplay from \"./DemographicDisplay\";\r\n\r\nimport _ from 'lodash'\r\n\r\nimport FlipMove from 'react-flip-move';\r\nimport CardPile from \"./CardPile\";\r\nimport ChoiceArrow from \"./ChoiceArrow\";\r\nimport {ChoiceActionCard} from \"../cardgame/Card\";\r\nimport PlayerHand from \"./PlayerHand\";\r\nimport {isA} from \"../../node_modules.deltemetoo/expect/build/jasmineUtils\";\r\n\r\ntype GameBoardProps = {\r\n    gamestate: CardGameState;\r\n    game: CardGame,\r\n    lastmove: CardGameMove;\r\n    previewState?: CardGameState;\r\n    onCardClick: (n:number)=>void;\r\n    setPreview: (move?:CardGameMove)=>void,\r\n    onChoiceClick: (move:CardGameChoiceMove)=>void\r\n\r\n}\r\ntype PlayerDisplayProps = {\r\n    isHidden: boolean;\r\n    isActive: boolean;\r\n    lastmove?: CardGameMove;\r\n    player: CardGamePlayerState;\r\n    gamestate: CardGameState;\r\n    game: CardGame;\r\n    onCardClick: (n:number)=>void;\r\n    setPreview: (move?:CardGameMove)=>void,\r\n}\r\n\r\nconst WRAPPER_STYLE:CSSProperties = {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    placeContent: 'center',\r\n}\r\n\r\nconst ACTIVE_WRAPPER_STYLE = {\r\n    ...WRAPPER_STYLE,\r\n    background: 'gold',\r\n}\r\n\r\nconst HEALTH_WRAPPER_STYLE:CSSProperties = {\r\n    fontSize: 80,\r\n    position: \"relative\",\r\n}\r\nconst HEALTH_STYLE:CSSProperties = {\r\n    position: \"absolute\",\r\n    bottom:40,\r\n    left: 25,\r\n    width: 20,\r\n    fontSize: 16,\r\n    color: \"white\",\r\n    textAlign: 'center'\r\n}\r\n\r\nconst PLAYER_BOARD_STYLE:CSSProperties = {\r\n    height: 200,\r\n    display: 'flex',\r\n    justifyContent:'center',\r\n    alignItems: 'center',\r\n    placeContent: 'center',\r\n\r\n}\r\n\r\nconst PlayerDisplay:FunctionComponent<PlayerDisplayProps> = ({onCardClick, setPreview, game, player, isActive, isHidden, lastmove, gamestate})=>{\r\n    const cardsBeingPlayed = lastmove && lastmove.type === 'play' ? [lastmove.cardNumber] : []\r\n\r\n    const displayHand = [...player.hand, ...cardsBeingPlayed].sort((a,b)=>a-b);\r\n\r\n    const board = <div >\r\n        <FlipMove style={{...PLAYER_BOARD_STYLE}}>\r\n            {player.board.map(n=><div key={n+' '+game.cardIndex[n].getName()}>\r\n                <CardWrapper\r\n                    gamestate={gamestate}\r\n                    game={game}\r\n                    onClick={()=>{}}\r\n                    setPreview={()=>{}}\r\n                    isOpponent={isHidden}\r\n                    isHidden={false}\r\n                    card={game.cardIndex[n]}\r\n                    canBePlayed={false}\r\n                    canBeDiscarded={false}\r\n                    beingPlayed={false}\r\n                    onBoard={true}\r\n                />\r\n            </div>)}\r\n        </FlipMove>\r\n    </div>\r\n\r\n    return <div style={isActive ? ACTIVE_WRAPPER_STYLE : WRAPPER_STYLE}>\r\n            <div style={HEALTH_WRAPPER_STYLE}>\r\n                🟆\r\n                <div style={HEALTH_STYLE}>\r\n                    {player.capital}\r\n                </div>\r\n            </div>\r\n            <div style={HEALTH_WRAPPER_STYLE}>\r\n                🟊\r\n                <div style={HEALTH_STYLE}>\r\n                    {player.popularity}\r\n                </div>\r\n            </div>\r\n            <PlayerHand\r\n                game={game}\r\n                displayHand={displayHand}\r\n                gamestate={gamestate}\r\n                onCardClick={onCardClick}\r\n                setPreview={setPreview}\r\n                isOpponent={isHidden}\r\n                isActive={isActive}\r\n                player={player}\r\n                cardsBeingPlayed={cardsBeingPlayed}\r\n            />\r\n            <CardPile\r\n                label=\"deck\"\r\n                cards={player.deck.map(n=>isHidden ? '?' : game.cardIndex[n] )}\r\n            />\r\n            <CardPile\r\n                label=\"discard\"\r\n                cards={player.discardPile.map(n=>game.cardIndex[n])}\r\n            />\r\n        </div>\r\n}\r\n\r\nconst GameBoard:FunctionComponent<GameBoardProps> = (props)=>{\r\n    const {gamestate, game, lastmove, onCardClick, onChoiceClick, setPreview, previewState} = props;\r\n    return <>\r\n        <div>\r\n            Step: {gamestate.step}\r\n        </div>\r\n        <PlayerDisplay onCardClick={()=>{}} setPreview={()=>{}} game={game} gamestate={gamestate} player={gamestate.playerTwo} lastmove={gamestate.activePlayer === 2 ? lastmove: undefined} isActive={gamestate.activePlayer === 2} isHidden={true}/>\r\n        <DemographicDisplay\r\n            gamestate={gamestate}\r\n            game={game}\r\n            previewState={previewState}\r\n            onChoiceClick={onChoiceClick}\r\n            setPreview={setPreview}\r\n        />\r\n        <PlayerDisplay onCardClick={onCardClick} setPreview={setPreview} game={game} gamestate={gamestate} player={gamestate.playerOne} lastmove={gamestate.activePlayer === 1 ? lastmove: undefined} isActive={gamestate.activePlayer === 1} isHidden={false}/>\r\n    </>\r\n}\r\n\r\nexport default GameBoard;","\r\n// @ts-ignore\r\n// eslint-disable-next-line\r\nimport Worker from 'comlink-loader!./worker'; // inline loader\r\n\r\nexport default Worker;","\r\nimport parse from 'csv-parse/lib/sync'\r\nimport {Card, ChoiceActionCard, EffectCard, ItemCard} from \"../Card\";\r\nimport TextTemplate from \"../Components/TextTemplate\";\r\nimport ExampleDeckCsv from './ExampleDeck.json'\r\n\r\ntype RawCard = {\r\n    name: string,\r\n    text: string,\r\n    type: 'effect'|'choice'|'policy'\r\n    cost: number\r\n}\r\n\r\nfunction parseCard(raw:RawCard, cardNumber:number):Card {\r\n    const {name, text, cost, type} = raw;\r\n    if(type === 'effect'){\r\n        const effect = TextTemplate.parse('Eff', text);\r\n        return new EffectCard(effect, text, name, cardNumber, cost);\r\n    }else if(type === 'choice'){\r\n        const effect = TextTemplate.parse('ChoiceAction', text);\r\n        return new ChoiceActionCard(effect, text, name, cardNumber, cost);\r\n    }else if(type === 'policy'){\r\n        const ability = TextTemplate.parse('Ability', text);\r\n        return new ItemCard(ability, text, name, cardNumber, cost);\r\n    }\r\n    throw new Error(\"Unknown Card Type \"+type)\r\n}\r\n\r\n\r\nfunction getExampleDeck():Record<number, Card>{\r\n    if(Object.values(TextTemplate.templates).some(arr=>arr.length === 0)) {\r\n        throw new Error(\"Text Templates not setup\")\r\n    }\r\n    const rawCards:RawCard[] = ExampleDeckCsv as RawCard[];\r\n    return [1,2,3].flatMap(_=>rawCards).map(parseCard)\r\n}\r\n\r\n\r\nexport default getExampleDeck;","import CardGame, {CardGameChain, CardGameMove, CardGameState} from \"../../cardgame/CardGame\";\r\nimport {GameStatus} from \"../../mcts/mcts\";\r\nimport GameBoard from \"../GameBoard\";\r\nimport {WorkerResponse} from \"../worker/worker\";\r\nimport Worker from \"../worker\";\r\nimport {Card} from \"../../cardgame/Card\";\r\nimport setupEffects from \"../../cardgame/Components/setup\";\r\nimport {useMemo} from \"react\";\r\nimport * as React from \"react\";\r\nimport getExampleDeck from \"../../cardgame/Data/ExampleDecks\";\r\nimport './App.css';\r\nimport delay from \"delay\";\r\n\r\n\r\ntype CombinedGameState = {\r\n    state: CardGameState,\r\n    lastMove?: CardGameChain\r\n}\r\n\r\nfunction getMoveFromCardClick(gamestate:CardGameState, cardNumber:number):CardGameMove{\r\n    if(gamestate.step==='draw')return {type:'discard', cardNumber};\r\n    else return {type:'play', cardNumber}\r\n}\r\n\r\nconst WATCH_MODE = false;\r\n\r\nconst worker = new Worker();\r\n\r\nfunction Main() {\r\n    setupEffects();\r\n  const cardIndex:Record<number, Card> = useMemo(()=>getExampleDeck(), []);\r\n  const game = useMemo(()=>new CardGame(cardIndex), [cardIndex]);\r\n\r\n  const [combinedGameState, setCombinedGameState] = React.useState<CombinedGameState>({\r\n      state: game.newGame()\r\n  });\r\n  const status = useMemo(()=>game.getStatus(combinedGameState.state),[game, combinedGameState.state])\r\n\r\n  const [mood, setMood] = React.useState('...');\r\n  const [previewState, setPreviewState] = React.useState<CardGameState|undefined>()\r\n\r\n    const [isLoading, setIsLoading] = React.useState(false);\r\n\r\n    React.useEffect(()=>{\r\n        let nextTimeout:number = 0;\r\n        const loop = async ()=>{\r\n            if((combinedGameState.state.activePlayer === 2 || WATCH_MODE) && !isLoading && game.getStatus(combinedGameState.state) === GameStatus.IN_PLAY){\r\n                setIsLoading(true)\r\n                const delay_time = (combinedGameState.lastMove as CardGameMove)?.type === 'end' ? 1000 : 1500;\r\n                const [{mood, move}]:[WorkerResponse, void] = await Promise.all([worker.processData(combinedGameState.state), delay(delay_time)])\r\n                const newState = game.applyMoveChain(combinedGameState.state, move);\r\n                setMood(mood)\r\n                setIsLoading(false)\r\n                setPreviewState(undefined)\r\n                setCombinedGameState({\r\n                    state:newState,\r\n                    lastMove: Array.isArray(move) ? move[0] : move\r\n                })\r\n            }\r\n        }\r\n        nextTimeout = window.setTimeout(loop,0);\r\n        return ()=>window.clearTimeout(nextTimeout);\r\n    },[combinedGameState, game, isLoading])\r\n    const lastmove  = (Array.isArray(combinedGameState.lastMove)?combinedGameState.lastMove[0] : combinedGameState.lastMove )||{type:'end'}\r\n    const canEndTurn = game.getValidMoves(combinedGameState.state).find(m=>!Array.isArray(m) && m.type===\"end\");\r\n\r\n  return (\r\n    <div className=\"App\">\r\n        {status !== GameStatus.IN_PLAY && <h1>{status}</h1>}\r\n      <GameBoard\r\n          gamestate={combinedGameState.state}\r\n          game={game}\r\n          lastmove={lastmove}\r\n          previewState={previewState}\r\n          onCardClick={(n)=>{\r\n              if(status !== GameStatus.IN_PLAY)return;\r\n              const move = getMoveFromCardClick(combinedGameState.state,n)\r\n              const newState = game.applyMove(combinedGameState.state, move);\r\n              setPreviewState(undefined)\r\n            setCombinedGameState({\r\n                state:newState,\r\n                lastMove: move\r\n            })\r\n          }}\r\n          onChoiceClick={(move)=>{\r\n              if(status !== GameStatus.IN_PLAY)return;\r\n              const newState = game.applyMove(combinedGameState.state, move);\r\n              setPreviewState(undefined)\r\n            setCombinedGameState({\r\n                state:newState,\r\n                lastMove: move\r\n            })\r\n          }}\r\n          setPreview={move=>setPreviewState( move && game.applyMove(combinedGameState.state, move))}\r\n      />\r\n\r\n      <button\r\n          disabled={status!==GameStatus.IN_PLAY || combinedGameState.state.activePlayer === 2 || !canEndTurn}\r\n          onClick={()=>{\r\n              const move:CardGameMove = {type:\"end\"}\r\n              const newState = game.applyMove(combinedGameState.state, move);\r\n            setCombinedGameState({\r\n                state:newState,\r\n                lastMove: move\r\n            })\r\n          }}\r\n      >\r\n          {combinedGameState.state.endRoundAfterThisTurn ? 'End Round' : 'End Turn'}\r\n      </button>\r\n\r\n        <div>\r\n            {mood}\r\n        </div>\r\n        {isLoading && 'loading'}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Main;\r\n","import React from \"react\";\nimport Main from \"./client/pages/main\";\nimport AllCards from \"./client/pages/allCards\";\n\nfunction App(){\n    return <Main/>\n}\n\nexport default App;","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","var wrap = require('comlink').wrap,Worker = require(\"!worker-loader?{}!C:/Users/Kai/PycharmProjects/mcts/card-game-ai/node_modules/comlink-loader/dist/comlink-worker-loader.js!C:\\\\Users\\\\Kai\\\\PycharmProjects\\\\mcts\\\\card-game-ai\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js??ref--5-oneOf-2!C:\\\\Users\\\\Kai\\\\PycharmProjects\\\\mcts\\\\card-game-ai\\\\src\\\\client\\\\worker\\\\worker.ts\"),inst;module.exports = function f() {if (this instanceof f) return wrap(Worker());return inst || (inst = wrap(Worker()));};","var map = {\n\t\"./card-draw.png\": 67,\n\t\"./card-exchange.png\": 68,\n\t\"./card-pickup.png\": 69,\n\t\"./card-random.png\": 70,\n\t\"./contract.png\": 71,\n\t\"./expand.png\": 72,\n\t\"./move.png\": 73,\n\t\"./overhead.png\": 74,\n\t\"./quill-ink.png\": 75,\n\t\"./star.png\": 76\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 66;","export default __webpack_public_path__ + \"static/media/card-draw.2b111e73.png\";","export default __webpack_public_path__ + \"static/media/card-exchange.6c1700d6.png\";","export default __webpack_public_path__ + \"static/media/card-pickup.ec1ec04f.png\";","export default __webpack_public_path__ + \"static/media/card-random.a5195cfa.png\";","export default __webpack_public_path__ + \"static/media/contract.f2e4fc9b.png\";","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAYAAAD0eNT6AAAgAElEQVR4Xu3d7XrbOLKFUenKO33lmieZpNvtODYlArULxDp/j0RQqwjiHed83G/+iwABAgQIENhO4L7dL/aDCRAgQIAAgZsA8BAQIECAAIENBQTAhkP3kwkQIECAgADwDBAgQIAAgQ0FBMCGQ/eTCRAgQICAAPAMECBAgACBDQUEwIZD95MJECBAgIAA8AwQIECAAIENBQTAhkP3kwkQIECAgADwDBAgQIAAgQ0FBMCGQ/eTCRAgQICAAPAMECBAgACBDQUEwIZD95MJECBAgIAA8AwQIECAAIENBQTAhkP3kwkQIECAgADwDBAgQIAAgQ0FBMCGQ/eTCRAgQICAAPAMECBAgACBDQUEwIZD95MJECBAgIAA8AwQIECAAIENBQTAhkP3kwkQIECAgADwDBAgQIAAgQ0FBMCGQ/eTCRAgQICAAPAMECBAgACBDQUEwIZD95MJECBAgIAA8AwQIECAAIENBQTAhkP3kwkQIECAgADwDBAgQIAAgQ0FBMCGQ/eTCRAgQICAAPAMECBAgACBDQUEwIZD95MJECBAgIAA8AwQIECAAIENBQTAhkP3kwkQIECAgADwDBAgQIAAgQ0FBMCGQ/eTCRAgQICAAPAMECBAgACBDQUEwIZD95MJECBAgIAA8AwQIECAAIENBQTAhkP3kwkQIECAgADwDBAgQIAAgQ0FBMCGQ/eTCRAgQICAAPAMECBAgACBDQUEwIZD95MJECBAgIAA8AwQIECAAIENBQTAhkP3kwkQIECAgADwDBAgQIAAgQ0FBMCGQ/eTCRAgQICAAPAMECBAgACBDQUEwIZD95MJECBAgIAA8AwQIECAAIENBQTAhkP3kwkQIECAgADwDBAgQIAAgQ0FBMCGQ/eTCRAgQICAAPAMECBAgACBDQUEwIZD95MJECBAgIAA8AwQIECAAIENBQTAhkP3kwkQIECAgADwDBAgQIAAgQ0FBMCGQ/eTCRAgQIDAtgHweDwexr+twN/3+/3btr/eD789Ho/v8/8LxZ4C9/t927Pv7cS3RRAAe2782+3m8N929P/94SJg3wdBAPx/9gJg3z2w4y93+O849U9+swjY84EQAALAPwHstfcd/nvN+/CvFQGHqS7zQQEgAATAZbbzlz/E4f8l0d4fEAF7zV8ACAABsMeed/jvMefTv1IEnCZc5gICQAAIgGW268s36vB/mW7PL4qAPeYuAASAALj2Xnf4X3u+036dCJhG2+bCAkAACIA223H4jTj8h5PudUERcO15CwABIACuuccd/teca/mvEgHl5GULCgABIADKtlvZQg7/Muo9FhIB15yzABAAAuBae9vhf615tvk1IqDNKIbdiAAQAAJg2HaKX8jhHx/BtW9ABFxrvgJAAAiAa+xph/815tj+V4iA9iM6fIMCQAAIgMPbpe0HHf5tR3PNGxMB15irABAAAmDtvezwX3t+y969CFh2dP/cuAAQAAJg3X3s8F93dpe4cxGw9hgFgAAQAGvuYYf/mnO73F2LgHVHKgAEgABYb/86/Neb2aXvWASsOV4BIAAEwFp71+G/1ry2uVsRsN6oBYAAEADr7FuH/zqz2vJORcBaYxcAAkAArLFnHf5rzGn7uxQB6zwCAkAACID++9Xh339G7vCNgAhY43EQAAJAAPTeqw7/3vNxd38QEAH9Hw0BIAAEQN996vDvOxt3dkBABBxACn5EAAgAARDcgJ8s7fDvORd39aSACHgSrPDjAkAACIDCDXdwKYf/QSgfW0NABPSckwAQAAKg1950+Peah7sZJCACBkEOvIwAEAACYOCGOnkph/9JQF/vLSACes1HAAgAAdBjTzr8e8zBXUwWEAGTgZ+4vAAQAALgiQ0z6aMO/0mwLttTQAT0mIsAEAACILsXHf5Zf6uHBERACP7NsgJAAAiA3D50+OfsrdxAQARkhyAABIAAyOxBh3/G3arNBERAbiACQAAIgPr95/CvN7diYwERkBmOABAAAqB27zn8a72ttoiACKgflAAQAAKgbt85/OusrbSggAioHZoAEAACoGbPOfxrnK2yuIAIqBugABAAAmD+fnP4zze2woUEREDNMAWAABAAc/eaw3+ur6tfVEAEzB+sABAAAmDePnP4z7N15Q0ERMDcIQsAASAA5uwxh/8cV1fdTEAEzBu4ABAAAmD8/nL4jzd1xY0FRMCc4QsAASAAxu4th/9YT1cj8ENABIx/EASAABAA4/aVw3+cpSsR+E1ABIx9KASAABAAY/aUw3+Mo6sQ+FRABIx7QASAABAA5/eTw/+8oSsQOCwgAg5TffpBASAABMC5veTwP+fn2wReEhABL7H950sCQAAIgHP7SACc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\"","export default __webpack_public_path__ + \"static/media/move.26dbfb84.png\";","export default __webpack_public_path__ + \"static/media/overhead.f48ba000.png\";","export default __webpack_public_path__ + \"static/media/quill-ink.d61129e8.png\";","export default __webpack_public_path__ + \"static/media/star.d313c182.png\";"],"sourceRoot":""}